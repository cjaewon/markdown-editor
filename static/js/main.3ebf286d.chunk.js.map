{"version":3,"sources":["lib/styles/transitions.ts","lib/styles/media.ts","components/write/EditorPanes.tsx","lib/styles/palette.ts","components/write/TitleTextarea.tsx","lib/styles/zIndexes.ts","components/write/Toolbar.tsx","components/common/RoundButton.tsx","components/write/AddLink.tsx","lib/hooks/useInput.tsx","lib/utils.ts","components/common/OpaqueLayer.tsx","components/common/PopupBase.tsx","components/common/Button.tsx","components/common/PopupOKCancel.tsx","modules/write.ts","components/write/AskChangeEditor.tsx","lib/detectIOS.ts","components/write/WriteMarkdownEditor.tsx","components/write/TagInput.tsx","container/write/TagInputContainer.tsx","components/write/WriteFooter.tsx","lib/remark/embedPlugin.ts","container/write/MarkdownEditorContainer.tsx","lib/remark/prismPlugin.js","lib/styles/prismThemes.ts","components/common/Typography.tsx","lib/katexWhitelist.ts","components/common/MarkdownRender.tsx","components/write/MarkdownPreview.tsx","container/write/MarkdownPreviewContainer.tsx","container/write/EditorPanesContainer.tsx","App.tsx","serviceWorker.ts","modules/core/actions.ts","modules/core/reducer.ts","modules/post.ts","modules/error.ts","modules/scroll.ts","modules/index.ts","index.tsx"],"names":["transitions","fadeIn","keyframes","fadeOut","popInFromBottom","popOutToBottom","popIn","slideUp","slideDown","mediaQuery","maxWidth","media","xxlarge","xlarge","large","medium","small","xsmall","custom","EditorPanesBlock","styled","div","EditorPane","props","shadow","css","RightPane","EditorPanes","theme","left","right","data-testid","style","backgroundColor","palette","teal0","teal1","teal2","teal3","teal4","teal5","teal6","teal7","teal8","teal9","gray0","gray1","gray2","gray3","gray4","gray5","gray6","gray7","gray8","gray9","red0","red1","red2","red3","red4","red5","red6","red7","red8","red9","buttonColorMap","teal","background","color","hoverBackground","lightGray","gray","darkGray","transparent","red","TitleTextareaForSSR","textarea","TitleTextarea","TextareaAutosize","zIndexes","OpaqueLayer","AuthModal","Toolbar","Popup","WriteFooter","PublishScreen","DragDropUpload","ToolbarBlock","forMarkdown","Heading","ToolbarItem","button","Separator","mode","onClick","innerRef","onConvert","ios","id","ref","className","value","RoundButtonBlock","inline","size","border","RoundButton","to","rest","e","preventDefault","AddLinkBlock","useCallback","React","useRef","useEffect","AddLink","top","bottom","stickToRight","onConfirm","onClose","onDelete","defaultValue","useState","input","setInput","target","useInput","onChange","onSubmit","current","focus","onOutsideClick","placeholder","updateKey","state","key","detectJSDOM","navigator","userAgent","includes","ssrEnabled","process","REACT_APP_SSR","OpaqueLayerBlock","visible","animate","setAnimate","timeoutId","mounted","closed","setClosed","document","body","overflowY","setTimeout","clearTimeout","PopupBaseBlock","PopupWrapper","PopupBase","children","ButtonBlock","responsive","Button","htmlProps","blur","WriteMode","PopupOKCancelBlock","PopupOKCancel","title","onCancel","createStandardAction","deprecated","changeMarkdown","changeTitle","convertEditorMode","setHtml","changeTags","openPublish","setDefaultDescription","setThumbnail","setInitialBody","initialState","MARKDOWN","markdown","html","tags","publish","textBody","defaultDescription","description","isPrivate","urlSlug","thumbnail","editSeries","selectedSeries","postId","isTemp","initialTitle","initialBody","write","handlers","action","handler","type","createReducer","payload","WYSIWYG","slice","isMarkdown","series","AskChangeEditor","convertTo","detectIOS","checkAgent","test","window","MSStream","checkPlatform","platform","maxTouchPoints","require","checkEmbed","text","keys","Object","checker","i","length","code","fn","removeHeading","replace","WriterHead","hide","screenHeight","screen","height","springStyle","useSpring","maxHeight","opacity","config","duration","PaddingWrapper","WriteMarkdownEditor","block","toolbarElement","editorElement","appleEditorElement","toolbarTop","addLink","askChangeEditor","clientWidth","hideUpper","appleCursorPos","codemirror","ignore","isIOS","initialize","CodeMirror","fromTextArea","lineWrapping","setValue","on","cm","onChangeMarkdown","getValue","stickToBottomIfNeeded","doc","getDoc","line","getCursor","lastLine","preview","getElementById","scrollTop","scrollHeight","info","getScrollInfo","setState","dataTransfer","dropEffect","console","log","editor","clipboardData","originalEvent","getData","check","selection","getSelection","replaceSelection","cursor","pos","ch","replaceRange","items","kind","clientHeight","scrollTo","handleResize","addImageToEditor","image","cursorPos","selectionEnd","textBefore","textAfter","imageMarkdown","encodeURI","nextCursorPos","selectionStart","handleOpenAddLink","cursorCoords","calculatedTop","defaultTextHeight","handleConfirmAddLink","link","setSelection","setCursor","handleCancelAddLink","handleToolbarClickForApple","sliced","lastNewLineIndex","lastIndexOf","currentNewLineIndex","indexOf","lineText","textBelowCurrentLine","setCursorPos","heading1","replacedLine","posDiff","heading2","heading3","heading4","handleToolbarClick","start","end","getLine","map","number","characters","repeat","plain","reduce","headingHandlers","index","assign","bold","selected","getRange","italic","selectLeftAndRight","strike","blockquote","matches","codeblock","handleTitleChange","onChangeTitle","handleAskConvert","handleConfirmConvert","handleCancelConvert","handleAppleTextareaChange","prevProps","this","getBoundingClientRect","addEventListener","removeEventListener","tagInput","footer","MarkdownEditorBlock","rows","HorizontalBar","MarkdownWrapper","display","AppleTextarea","FooterWrapper","width","youtube","result","exec","twitter","regex","links","match","push","pathMatch","codesandbox","codepen","TagItem","Tag","Help","useTransition","from","transform","enter","leave","tension","friction","HelpBlock","item","TagInputBlock","StyledInput","TagInput","initialTags","setTags","setFocus","editableDiv","innerText","insertTag","tag","processed","trim","tempTags","execArray","charAt","onKeyDown","nextTags","filter","t","onRemove","tabIndex","onFocus","onBlur","mapDispatchToProps","connect","WriteFooterBlock","Group","StyledButton","BackButton","onGoBack","edit","embedTypeRegex","converters","embedPlugin","tree","file","visit","node","findIndex","childNode","siblingNode","label","splice","MarkdownEditorContainer","useSelector","setLastSavedData","dispatch","useDispatch","actionCreators","useMemo","bindActionCreators","remark","use","strip","err","String","breaks","htmlPlugin","attacher","include","exclude","visitor","lang","data","hProperties","prism","Prism","highlighted","highlight","languages","markup","ast","prismThemes","github","monokai","dracula","TypographyBlock","Typography","attributes","acc","katexWhitelist","styles","MarkdownRenderBlock","sanitize","allowedTags","allowedAttributes","a","img","iframe","span","allowedStyles","allowedIframeHostnames","MarkdownRenderErrorBoundary","hasError","onError","hasTagError","codeTheme","onConvertFinish","editing","remarkParse","slug","prismPlugin","remark2rehype","allowDangerousHTML","raw","math","katex","stringify","processSync","toString","element","setElement","setHasTagError","delay","setDelay","throttledUpdate","throttle","lines","split","nextDelay","Math","max","min","floor","url","Promise","resolve","reject","script","createElement","onload","onerror","src","head","appendChild","el","parse","rel","href","integrity","crossOrigin","dangerouslySetInnerHTML","__html","MarkdownPreviewBlock","Title","h1","MarkdownPreview","EditorPanesContainer","App","Boolean","location","hostname","core","layer","auth","popup","message","produce","draft","post","createSlice","name","reducers","setPostId","error","errorType","showNotFound","reset","scroll","main","preserveScroll","rootReducer","combineReducers","reducer","store","createStore","__REDUX_STATE__","ReactDOM","render","StrictMode","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.3ebf286d.chunk.js","sourcesContent":["import { keyframes } from 'styled-components';\n\nconst fadeIn = keyframes`\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n`;\n\nconst fadeOut = keyframes`\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n`;\n\nconst popInFromBottom = keyframes`\n  0% {\n    opacity: 0;\n    transform: translateY(400px) scale(0.75);\n  }\n  75% {\n    opacity: 1;\n    transform: translateY(-16px) scale(1.0);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0px);\n  }`;\n\nconst popOutToBottom = keyframes`\n  0% {\n    opacity: 1;\n    transform: translateY(0px) scale(1.0);\n  }\n  100% {\n    opacity: 0;\n    transform: translateY(400px) scale(0.75);\n  }`;\n\nconst popIn = keyframes`\n  0% {\n    opacity: 0.7;\n    transform: scale3d(0.8, 0.8, 1);\n  }\n  100% {\n    opacity: 1;\n    transform: scale3d(1, 1, 1);\n  }\n`;\n\nconst slideUp = keyframes`\n  0% {\n    transform: translateY(100%);\n  }\n  100% {\n    transform: translateY(0%);\n  };\n`;\n\nconst slideDown = keyframes`\n  0% {\n    transform: translateY(0%);\n  }\n  100% {\n    transform: translateY(100%);\n  };\n`;\n\nconst transitions = {\n  fadeIn,\n  fadeOut,\n  popInFromBottom,\n  popOutToBottom,\n  popIn,\n  slideUp,\n  slideDown,\n};\n\nexport default transitions;\n","export const mediaQuery = (maxWidth: number) => `\n  @media (max-width: ${maxWidth}px)\n`;\n\nconst media = {\n  xxlarge: mediaQuery(1920),\n  xlarge: mediaQuery(1440),\n  large: mediaQuery(1200),\n  medium: mediaQuery(1024),\n  small: mediaQuery(768),\n  xsmall: mediaQuery(375),\n  custom: mediaQuery,\n};\n\nexport default media;\n","import * as React from 'react';\nimport styled, { css } from 'styled-components';\n\nimport transitions from '../../lib/styles/transitions';\nimport media from '../../lib/styles/media';\nconst EditorPanesBlock = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  animation: ${transitions.fadeIn} 0.5s forwards;\n`;\nconst EditorPane = styled.div<{ shadow?: boolean }>`\n  min-width: 0;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  ${props =>\n    props.shadow &&\n    css`\n      z-index: 1;\n      box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.015);\n    `}\n`;\n\nconst RightPane = styled(EditorPane)`\n  ${media.medium} {\n    display: none;\n  }\n`;\n\nexport interface EditorPanesProps {\n  theme?: 'LIGHT' | 'DARK';\n  left?: React.ReactNode;\n  right?: React.ReactNode;\n}\n\nconst EditorPanes: React.FC<EditorPanesProps> = ({\n  theme = 'LIGHT',\n  left,\n  right,\n}) => {\n  return (\n    <EditorPanesBlock>\n      <EditorPane\n        shadow\n        data-testid=\"left\"\n        style={{\n          backgroundColor: theme === 'DARK' ? '#263238' : 'white',\n        }}\n      >\n        {left}\n      </EditorPane>\n      <RightPane\n        data-testid=\"right\"\n        style={{\n          backgroundColor: theme === 'DARK' ? 'white' : '#fbfdfc',\n        }}\n      >\n        {right}\n      </RightPane>\n    </EditorPanesBlock>\n  );\n};\n\nexport default EditorPanes;\n","const palette = {\n  /* teal */\n  teal0: '#F3FFFB',\n  teal1: '#C3FAE8',\n  teal2: '#96F2D7',\n  teal3: '#63E6BE',\n  teal4: '#38D9A9',\n  teal5: '#20C997',\n  teal6: '#12B886',\n  teal7: '#0CA678',\n  teal8: '#099268',\n  teal9: '#087F5B',\n  /* gray */\n  gray0: '#F8F9FA',\n  gray1: '#F1F3F5',\n  gray2: '#E9ECEF',\n  gray3: '#DEE2E6',\n  gray4: '#CED4DA',\n  gray5: '#ADB5BD',\n  gray6: '#868E96',\n  gray7: '#495057',\n  gray8: '#343A40',\n  gray9: '#212529',\n  /* red */\n  red0: '#fff5f5',\n  red1: '#ffe3e3',\n  red2: '#ffc9c9',\n  red3: '#ffa8a8',\n  red4: '#ff8787',\n  red5: '#ff6b6b',\n  red6: '#fa5252',\n  red7: '#f03e3e',\n  red8: '#e03131',\n  red9: '#c92a2a',\n};\n\nexport const buttonColorMap: {\n  [color: string]: {\n    background: string;\n    color: string;\n    hoverBackground: string;\n  };\n} = {\n  teal: {\n    background: palette.teal6,\n    color: 'white',\n    hoverBackground: palette.teal5,\n  },\n  lightGray: {\n    background: palette.gray2,\n    color: palette.gray7,\n    hoverBackground: palette.gray1,\n  },\n  gray: {\n    background: palette.gray6,\n    color: 'white',\n    hoverBackground: palette.gray5,\n  },\n  darkGray: {\n    background: palette.gray8,\n    color: 'white',\n    hoverBackground: palette.gray6,\n  },\n  transparent: {\n    background: 'none',\n    color: palette.teal6,\n    hoverBackground: palette.teal1,\n  },\n  red: {\n    background: palette.red5,\n    color: 'white',\n    hoverBackground: palette.red4,\n  },\n};\n\nexport default palette;\n","import styled, { css } from 'styled-components';\nimport TextareaAutosize from 'react-textarea-autosize';\nimport palette from '../../lib/styles/palette';\nimport { mediaQuery } from '../../lib/styles/media';\n\nconst style = css`\n  display: block;\n  padding: 0;\n  font-size: 2.75rem;\n  ${mediaQuery(767)} {\n    font-size: 1.8rem;\n  }\n  width: 100%;\n  resize: none;\n  line-height: 1.5;\n  outline: none;\n  border: none;\n  font-weight: bold;\n  color: ${palette.gray9};\n  &::placeholder {\n    color: ${palette.gray5};\n  }\n`;\n\nexport const TitleTextareaForSSR = styled.textarea`\n  ${style}\n`;\n\nconst TitleTextarea = styled(TextareaAutosize)`\n  ${style}\n`;\n\nexport default TitleTextarea;\n","const zIndexes = {\n  OpaqueLayer: 10,\n  AuthModal: 20,\n  Toolbar: 10,\n  Popup: 25,\n  WriteFooter: 10,\n  PublishScreen: 15,\n  DragDropUpload: 100,\n};\n\nexport default zIndexes;\n","import * as React from 'react';\nimport styled, { css } from 'styled-components';\nimport {\n  MdFormatBold,\n  MdFormatItalic,\n  MdFormatUnderlined,\n  MdFormatStrikethrough,\n  MdInsertLink,\n  MdFormatQuote,\n  MdImage,\n  MdCode,\n} from 'react-icons/md';\nimport palette from '../../lib/styles/palette';\nimport zIndexes from '../../lib/styles/zIndexes';\nimport { mediaQuery } from '../../lib/styles/media';\n\n// box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.09);\nconst ToolbarBlock = styled.div<{\n  shadow: boolean;\n  forMarkdown: boolean;\n}>`\n  width: 100%;\n  top: 0;\n  display: flex;\n  align-items: center;\n  margin-bottom: 1rem;\n  width: 100%;\n  background: white;\n  z-index: ${zIndexes.Toolbar};\n  transition: all 0.125s ease-in;\n  flex-wrap: wrap;\n\n  ${props =>\n    props.forMarkdown &&\n    css`\n      margin-bottom: 1rem;\n      padding-left: 3rem;\n      padding-right: 3rem;\n\n      ${mediaQuery(767)} {\n        padding-left: 1rem;\n        padding-right: 1rem;\n        flex-wrap: unset;\n        overflow-x: auto;\n      }\n      width: auto;\n    `}\n\n  ${props =>\n    props.shadow &&\n    css`\n      box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.09);\n      margin-bottom: 0;\n    `}\n\n  .mobile-placeholder {\n    display: none;\n    ${mediaQuery(767)} {\n      display: block;\n    }\n    height: 1px;\n    width: 1rem;\n    flex-shrink: 0;\n  }\n`;\n\n// const ToolbarGroup = styled.div`\n//   display: flex;\n//   height: 100%;\n// `;\n\nconst Heading = styled.div`\n  font-size: 1rem;\n  font-weight: bold;\n  font-family: serif;\n  span {\n    font-size: 0.75rem;\n  }\n`;\nconst ToolbarItem = styled.button`\n  width: 3rem;\n  height: 3rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.75rem;\n  color: ${palette.gray6};\n  cursor: pointer;\n  flex-shrink: 0;\n\n  ${mediaQuery(767)} {\n    width: 2.5rem;\n    height: 2.5rem;\n    font-size: 1.45rem;\n  }\n  &:hover {\n    color: ${palette.gray9};\n    background: ${palette.gray0};\n  }\n  background: none;\n  outline: none;\n  border: none;\n  padding: 0;\n\n  &.ql-active {\n    color: ${palette.teal6};\n  }\n`;\n\nconst Separator = styled.div`\n  width: 1px;\n  height: 1.25rem;\n  margin-left: 0.5rem;\n  margin-right: 0.5rem;\n  background: ${palette.gray4};\n`;\nexport interface ToolbarProps {\n  shadow: boolean;\n  mode: 'MARKDOWN' | 'WYSIWYG';\n  onClick?: Function;\n  onConvert?: () => void;\n  innerRef?: React.RefObject<HTMLDivElement>;\n  ios?: boolean;\n}\n\nconst Toolbar: React.FC<ToolbarProps> = ({\n  shadow,\n  mode,\n  onClick = () => {},\n  onConvert,\n  innerRef,\n  ios,\n}) => {\n  const forMarkdown = mode === 'MARKDOWN';\n  return (\n    <ToolbarBlock\n      id=\"toolbar\"\n      shadow={shadow}\n      forMarkdown={forMarkdown}\n      ref={innerRef}\n    >\n      <ToolbarItem\n        className=\"ql-header\"\n        value={1}\n        onClick={() => onClick('heading1')}\n      >\n        <Heading>\n          H<span>1</span>\n        </Heading>\n      </ToolbarItem>\n      <ToolbarItem\n        className=\"ql-header\"\n        value={2}\n        onClick={() => onClick('heading2')}\n      >\n        <Heading>\n          H<span>2</span>\n        </Heading>\n      </ToolbarItem>\n      <ToolbarItem\n        className=\"ql-header\"\n        value={3}\n        onClick={() => onClick('heading3')}\n      >\n        <Heading>\n          H<span>3</span>\n        </Heading>\n      </ToolbarItem>\n      <ToolbarItem\n        className=\"ql-header\"\n        value={4}\n        onClick={() => onClick('heading4')}\n      >\n        <Heading>\n          H<span>4</span>\n        </Heading>\n      </ToolbarItem>\n      <Separator />\n      {!ios && (\n        <>\n          <ToolbarItem className=\"ql-bold\" onClick={() => onClick('bold')}>\n            <MdFormatBold />\n          </ToolbarItem>\n          <ToolbarItem className=\"ql-italic\" onClick={() => onClick('italic')}>\n            <MdFormatItalic />\n          </ToolbarItem>\n          {!forMarkdown && (\n            <ToolbarItem className=\"ql-underline\">\n              <MdFormatUnderlined />\n            </ToolbarItem>\n          )}\n          <ToolbarItem className=\"ql-strike\" onClick={() => onClick('strike')}>\n            <MdFormatStrikethrough />\n          </ToolbarItem>\n          <Separator />\n          <ToolbarItem\n            className=\"ql-blockquote\"\n            onClick={() => onClick('blockquote')}\n          >\n            <MdFormatQuote />\n          </ToolbarItem>\n          <ToolbarItem className=\"ql-link\" onClick={() => onClick('link')}>\n            <MdInsertLink />\n          </ToolbarItem>\n        </>\n      )}\n      <ToolbarItem className=\"ql-image\" onClick={() => onClick('image')}>\n        <MdImage />\n      </ToolbarItem>\n\n      {!ios && (\n        <ToolbarItem\n          className=\"ql-code-block\"\n          onClick={() => onClick('codeblock')}\n        >\n          <MdCode />\n        </ToolbarItem>\n      )}\n      <div className=\"mobile-placeholder\"></div>\n      {/* <Separator /> */}\n      {/* <ToolbarGroup> */}\n      {/* forMarkdown ? (\n          <ToolbarItem data-testid=\"quillconvert\" onClick={onConvert}>\n            <MdRemoveRedEye />\n          </ToolbarItem>\n        ) : (\n          <ToolbarItem data-testid=\"mdconvert\" onClick={onConvert}>\n            <FaMarkdown />\n          </ToolbarItem>\n        ) */}\n      {/* </ToolbarGroup> */}\n    </ToolbarBlock>\n  );\n};\n\nexport default Toolbar;\n","import * as React from 'react';\nimport styled, { css } from 'styled-components';\nimport { buttonColorMap } from '../../lib/styles/palette';\n// import { Route } from 'react-router';\n\ntype ButtonSize = 'SMALL' | 'DEFAULT' | 'LARGE';\n\ntype RoundButtonBlockProps = {\n  inline?: boolean;\n  color: string;\n  size: ButtonSize;\n  border: boolean;\n};\n\nconst RoundButtonBlock = styled.button<RoundButtonBlockProps>`\n  ${props =>\n    props.inline &&\n    css`\n      & + & {\n        margin-left: 1rem;\n      }\n    `}\n\n  ${props =>\n    props.size === 'SMALL' &&\n    css`\n      height: 1.5rem;\n      padding-left: 0.75rem;\n      padding-right: 0.75rem;\n      font-size: 0.875rem;\n      border-radius: 0.75rem;\n    `};\n  ${props =>\n    props.size === 'DEFAULT' &&\n    css`\n      height: 2rem;\n      padding-left: 1rem;\n      padding-right: 1rem;\n      font-size: 1rem;\n      border-radius: 1rem;\n    `};\n  ${props =>\n    props.size === 'LARGE' &&\n    css`\n      height: 3rem;\n      font-size: 1.5rem;\n      padding-left: 2rem;\n      padding-right: 2rem;\n      border-radius: 1.5rem;\n    `}\n\n  background: none;\n  border: none;\n  outline: none;\n  font-weight: bold;\n  word-break: keep-all;\n  background: ${props => buttonColorMap[props.color].background};\n  color: ${props => buttonColorMap[props.color].color};\n  &:hover {\n    background: ${props => buttonColorMap[props.color].hoverBackground};\n  }\n\n  ${props =>\n    props.border &&\n    css<RoundButtonBlockProps>`\n      background: white;\n      border: 1px solid ${props => buttonColorMap[props.color].background};\n      color: ${props => buttonColorMap[props.color].background};\n      &:hover {\n        background: ${props => buttonColorMap[props.color].background};\n        color: white;\n      }\n    `}\n\n  transition: 0.125s all ease-in;\n  &:focus {\n    box-shadow: 0px 2px 12px #00000030;\n  }\n  cursor: pointer;\n`;\n\ntype ButtonProps = React.DetailedHTMLProps<\n  React.ButtonHTMLAttributes<HTMLButtonElement>,\n  HTMLButtonElement\n>;\n\ninterface RoundButtonProps extends ButtonProps {\n  inline?: boolean;\n  to?: string;\n  size?: ButtonSize;\n  color?: 'teal' | 'gray' | 'darkGray' | 'lightGray';\n  border?: boolean;\n}\n\nconst RoundButton: React.FC<RoundButtonProps> = ({\n  ref,\n  to,\n  color = 'teal',\n  size = 'DEFAULT',\n  border = false,\n  ...rest\n}) => {\n  if (to) {\n    return (\n      <RoundButtonBlock\n        color={color}\n        onClick={e => {\n          e.preventDefault();\n        }}\n        size={size}\n        border={border}\n        {...rest}\n      />\n    );\n  }\n  return (\n    <RoundButtonBlock color={color} size={size} border={border} {...rest} />\n  );\n};\n\nexport default RoundButton;\n","import * as React from 'react';\nimport styled from 'styled-components';\nimport OutsideClickHandler from 'react-outside-click-handler';\nimport useInput from '../../lib/hooks/useInput';\nimport palette from '../../lib/styles/palette';\nimport RoundButton from '../common/RoundButton';\nimport { MdDelete } from 'react-icons/md';\n\nconst AddLinkBlock = styled.div`\n  z-index: 5;\n  position: absolute;\n  margin-bottom: 1rem;\n  & > .wrapper {\n    margin-top: 1rem;\n    width: 20rem;\n    background: white;\n    box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.08);\n    border-radius: 4px;\n    .top-wrapper {\n      margin-bottom: 1rem;\n      .title {\n        font-weight: bold;\n        color: ${palette.gray8};\n      }\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      svg {\n        font-size: 1.5rem;\n        color: ${palette.gray5};\n        cursor: pointer;\n        &:hover {\n          color: ${palette.gray9};\n        }\n      }\n    }\n    form {\n      width: 100%;\n      display: flex;\n      align-items: center;\n      input {\n        flex: 1;\n        border: none;\n        outline: none;\n        border-bottom: 1px inset ${palette.gray5};\n        font-size: 1rem;\n        margin-right: 0.5rem;\n        line-height: 1.5;\n        padding: 0;\n      }\n    }\n    padding: 1.5rem 1rem;\n  }\n`;\n\ninterface AddLinkProps {\n  left: number;\n  top: number | null;\n  bottom: number | null;\n  stickToRight?: boolean;\n  onConfirm: (link: string) => void;\n  onClose: () => void;\n  onDelete?: () => void;\n  defaultValue: string;\n}\n\nconst { useCallback, useRef, useEffect } = React;\n\nconst AddLink: React.FC<AddLinkProps> = ({\n  left,\n  top,\n  bottom,\n  stickToRight,\n  onConfirm,\n  onClose,\n  onDelete,\n  defaultValue,\n}) => {\n  const [value, onChange] = useInput(defaultValue);\n  const onSubmit = useCallback(\n    (e: React.FormEvent<HTMLFormElement>) => {\n      e.preventDefault();\n      onConfirm(value);\n    },\n    [onConfirm, value],\n  );\n  const input = useRef<HTMLInputElement>(null);\n  useEffect(() => {\n    if (!input.current) return;\n    input.current.focus();\n  }, []);\n  return (\n    <OutsideClickHandler onOutsideClick={onClose}>\n      <AddLinkBlock\n        style={{\n          left: stickToRight ? 'initial' : left,\n          top: top || 'initial',\n          bottom: bottom || 'initial',\n          right: stickToRight ? '3rem' : 'initial',\n        }}\n      >\n        <div className=\"wrapper\">\n          <div className=\"top-wrapper\">\n            <div className=\"title\">링크 {defaultValue ? '수정' : '등록'}</div>\n            {defaultValue && <MdDelete onClick={onDelete} />}\n          </div>\n          <form onSubmit={onSubmit}>\n            <input\n              value={value}\n              onChange={onChange}\n              placeholder=\"URL 을 입력하세요\"\n              ref={input}\n            />\n            <RoundButton color=\"darkGray\" size=\"SMALL\">\n              확인\n            </RoundButton>\n          </form>\n        </div>\n      </AddLinkBlock>\n    </OutsideClickHandler>\n  );\n};\n\nexport default AddLink;\n","import { useState, useCallback } from 'react';\n\nexport default function useInput(defaultValue: string) {\n  const [input, setInput] = useState(defaultValue);\n  const onChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n      setInput(e.target.value);\n    },\n    [],\n  );\n  const onReset = useCallback(() => setInput(''), []);\n  return [input, onChange, onReset] as [\n    string,\n    typeof onChange,\n    typeof onReset\n  ];\n}\n","import distanceInWordsToNow from 'date-fns/formatDistanceToNow';\nimport format from 'date-fns/format';\nimport koLocale from 'date-fns/locale/ko';\n\nexport const formatDate = (date: string): string => {\n  const d = new Date(date);\n  const now = Date.now();\n  const diff = now - new Date(date).getTime();\n  // less than 5 minutes\n  if (diff < 1000 * 60 * 5) {\n    return '방금 전';\n  }\n  if (diff < 1000 * 60 * 60 * 24) {\n    return distanceInWordsToNow(d, { addSuffix: true, locale: koLocale });\n  }\n  if (diff < 1000 * 60 * 60 * 36) {\n    return '어제';\n  }\n  if (diff < 1000 * 60 * 60 * 24 * 7) {\n    return distanceInWordsToNow(d, { addSuffix: true, locale: koLocale });\n  }\n  return format(d, 'yyyy년 M월 d일');\n};\n\nexport const getScrollTop = () => {\n  if (!document.body) return 0;\n  const scrollTop = document.documentElement\n    ? document.documentElement.scrollTop || document.body.scrollTop\n    : document.body.scrollTop;\n  return scrollTop;\n};\n\nexport const getScrollBottom = () => {\n  if (!document.body) return 0;\n  const { scrollHeight } = document.body;\n  const { innerHeight } = window;\n  const scrollTop = getScrollTop();\n  return scrollHeight - innerHeight - scrollTop;\n};\n\nexport type Handlers<T> = {\n  [type: string]: (state: T, action: any) => T;\n};\n\nexport function createReducer<S>(handlers: Handlers<S>, initialState: S) {\n  return (state: S = initialState, action: any) => {\n    const handler = handlers[action.type];\n    if (!handler) return state;\n    return handler(state, action);\n  };\n}\n\nexport function updateKey<S, K extends keyof S>(\n  state: S,\n  key: K,\n  value: S[K],\n): S {\n  return {\n    ...state,\n    [key]: value,\n  };\n}\n\nexport function detectJSDOM() {\n  if (typeof navigator === 'undefined') return false;\n  return navigator.userAgent.includes('jsdom');\n}\n\nexport const escapeForUrl = (text: string): string => {\n  return text\n    .replace(\n      /[^0-9a-zA-Zㄱ-힣.\\u3000-\\u303f\\u3040-\\u309f\\u30a0-\\u30ff\\uff00-\\uff9f\\u4e00-\\u9faf\\u3400-\\u4dbf -]/g,\n      '',\n    )\n    .trim()\n    .replace(/ /g, '-')\n    .replace(/--+/g, '-');\n};\n\nexport function safe<T>(callback: () => T) {\n  try {\n    return callback();\n  } catch (e) {\n    return null;\n  }\n}\n\nexport function sleep(ms: number) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport function loadScript(url: string) {\n  return new Promise((resolve, reject) => {\n    const script = document.createElement('script');\n    script.onload = function onload() {\n      resolve();\n    };\n    script.onerror = function onerror() {\n      reject();\n    };\n    script.src = url;\n    if (!document || !document.head) return;\n    document.head.appendChild(script);\n  });\n}\n\nexport const createFallbackTitle = (username: string | null) => {\n  if (!username) return '';\n  // const lastChar = username.slice(-1).toLowerCase();\n  // if (lastChar === 's') {\n  //   return `${username}' velog`;\n  // }\n  // return `${username}'s velog`;\n  return `${username}.log`;\n};\n\nexport const ssrEnabled = process.env.REACT_APP_SSR === 'enabled';\n","import * as React from 'react';\nimport styled, { css } from 'styled-components';\nimport transitions from '../../lib/styles/transitions';\nimport zIndexes from '../../lib/styles/zIndexes';\n\nconst OpaqueLayerBlock = styled.div<{\n  animate: boolean;\n  visible: boolean;\n}>`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(249, 249, 249, 0.85);\n  z-index: ${zIndexes.OpaqueLayer};\n\n  ${props =>\n    props.visible\n      ? css`\n          animation: ${transitions.fadeIn} 0.25s forwards;\n        `\n      : css`\n          animation: ${transitions.fadeOut} 0.25s forwards;\n        `}\n`;\n\ninterface OpaqueLayerProps {\n  visible: boolean;\n}\n\nconst { useState, useEffect, useRef } = React;\n\nconst OpaqueLayer: React.FC<OpaqueLayerProps> = ({ visible }) => {\n  const [animate, setAnimate] = useState(false);\n  const timeoutId = useRef<number | null>(null);\n  const mounted = useRef(false);\n  const [closed, setClosed] = useState(true);\n\n  // activates animation & hides and unhides scrollbar\n  useEffect(() => {\n    // scrollbar\n    document.body.style.overflowY = visible ? 'hidden' : 'initial';\n\n    // animate\n    if (!mounted.current) {\n      mounted.current = true;\n    } else {\n      setAnimate(true);\n      timeoutId.current = setTimeout(() => {\n        setAnimate(false);\n        if (!visible) {\n          setClosed(true);\n        }\n      }, 250);\n    }\n\n    if (visible) {\n      setClosed(false);\n    }\n\n    return () => {\n      if (!timeoutId.current) return;\n      clearTimeout(timeoutId.current);\n    };\n  }, [visible]);\n\n  useEffect(() => {\n    return () => {\n      document.body.style.overflowY = 'initial';\n    };\n  }, []);\n\n  if (!animate && !visible && closed) return null;\n\n  return <OpaqueLayerBlock animate={animate} visible={visible} />;\n};\n\nexport default OpaqueLayer;\n","import * as React from 'react';\nimport styled, { css } from 'styled-components';\nimport OpaqueLayer from './OpaqueLayer';\nimport zIndexes from '../../lib/styles/zIndexes';\nimport transitions from '../../lib/styles/transitions';\nimport media from '../../lib/styles/media';\n\nconst PopupBaseBlock = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: ${zIndexes.Popup};\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst PopupWrapper = styled.div<{ visible: boolean }>`\n  width: 25rem;\n  border-radius: 4px;\n  background: white;\n  padding: 2rem 1.5rem;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.09);\n  ${media.small} {\n    width: calc(100% - 2rem);\n  }\n  ${props =>\n    props.visible\n      ? css`\n          animation: ${transitions.popInFromBottom} 0.4s forwards ease-in-out;\n        `\n      : css`\n          animation: ${transitions.popOutToBottom} 0.2s forwards ease-in-out;\n        `}\n`;\n\ninterface PopupBaseProps {\n  visible: boolean;\n}\n\nconst { useState, useEffect } = React;\n\nconst PopupBase: React.FC<PopupBaseProps> = ({ visible, children }) => {\n  const [closed, setClosed] = useState(true);\n  useEffect(() => {\n    let timeoutId: number | null = null;\n    if (visible) {\n      setClosed(false);\n    } else {\n      timeoutId = setTimeout(() => {\n        setClosed(true);\n      }, 200);\n    }\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [visible]);\n\n  if (!visible && closed) return null;\n\n  return (\n    <>\n      <OpaqueLayer visible={visible} />\n      <PopupBaseBlock>\n        <PopupWrapper visible={visible}>{children}</PopupWrapper>\n      </PopupBaseBlock>\n    </>\n  );\n};\n\nexport default PopupBase;\n","import * as React from 'react';\nimport styled, { css } from 'styled-components';\nimport palette, { buttonColorMap } from '../../lib/styles/palette';\nimport media from '../../lib/styles/media';\n\ntype ColorType =\n  | 'teal'\n  | 'gray'\n  | 'darkGray'\n  | 'lightGray'\n  | 'transparent'\n  | 'red';\ntype ButtonSize = 'medium' | 'large';\n\nconst ButtonBlock = styled.button<{\n  color: ColorType;\n  inline: boolean;\n  size: ButtonSize;\n  responsive?: boolean;\n}>`\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bold;\n  cursor: pointer;\n  outline: none;\n  border: none;\n  color: white;\n  background: ${props => buttonColorMap[props.color].background};\n  color: ${props => buttonColorMap[props.color].color};\n  &:hover,\n  &:focus {\n    background: ${props => buttonColorMap[props.color].hoverBackground};\n  }\n  border-radius: 4px;\n  padding-top: 0;\n  padding-bottom: 0;\n  ${props =>\n    props.inline &&\n    css`\n      & + & {\n        margin-left: 0.5rem;\n      }\n    `}\n\n  ${props =>\n    props.responsive &&\n    css`\n      ${media.small} {\n        height: 1.5rem;\n        padding-left: 0.9375rem;\n        padding-right: 0.9375rem;\n        font-size: 0.75rem;\n      }\n    `}\n\n  ${props =>\n    props.size === 'medium' &&\n    css`\n      height: 2rem;\n      padding-left: 1.25rem;\n      padding-right: 1.25rem;\n      font-size: 1rem;\n    `}\n\n    ${props =>\n      props.size === 'large' &&\n      css`\n        height: 2.5rem;\n        padding-left: 1.125rem;\n        padding-right: 1.125rem;\n        & + & {\n          margin-left: 0.875rem;\n        }\n        font-size: 1.125rem;\n      `}\n\n    &:disabled {\n      cursor: not-allowed;\n      background: ${palette.gray3};\n      color: ${palette.gray5};\n      &:hover {\n        background: ${palette.gray3};\n        color: ${palette.gray5};\n      }\n    }\n`;\n\ninterface ButtonProps extends Omit<React.HTMLProps<HTMLButtonElement>, 'size'> {\n  color?: ColorType;\n  inline?: boolean;\n  size?: ButtonSize;\n  responsive?: boolean;\n}\n\nconst Button: React.FC<ButtonProps> = ({\n  children,\n  ref,\n  color = 'teal',\n  inline,\n  size = 'medium',\n  responsive = false,\n  ...rest\n}) => {\n  const htmlProps = rest as any;\n  return (\n    <ButtonBlock\n      color={color}\n      inline={inline}\n      size={size}\n      responsive={responsive}\n      {...htmlProps}\n      onClick={e => {\n        if (htmlProps.onClick) {\n          htmlProps.onClick(e);\n        }\n        (e.target as HTMLButtonElement).blur();\n      }}\n    >\n      {children}\n    </ButtonBlock>\n  );\n};\n\nexport default Button;\n","import * as React from 'react';\nimport styled from 'styled-components';\nimport PopupBase from './PopupBase';\nimport Button from './Button';\nimport palette from '../../lib/styles/palette';\n\nconst PopupOKCancelBlock = styled.div`\n  h3 {\n    margin: 0;\n    font-size: 1.5rem;\n    color: ${palette.gray8};\n    line-height: 1.5;\n    font-weight: bold;\n  }\n  .message {\n    line-height: 1.5;\n    font-size: 1rem;\n    color: ${palette.gray7};\n    margin-top: 1rem;\n    margin-bottom: 1rem;\n    white-space: pre-wrap;\n  }\n  .button-area {\n    margin-top: 2rem;\n    display: flex;\n    justify-content: flex-end;\n    button + button {\n      margin-left: 0.75rem;\n    }\n  }\n`;\n\nexport interface PopupOKCancelProps {\n  visible: boolean;\n  title?: string;\n  onConfirm?: () => any;\n  onCancel?: () => any;\n  children: React.ReactNode;\n}\n\nconst PopupOKCancel: React.FC<PopupOKCancelProps> = ({\n  visible,\n  title,\n  children,\n  onConfirm,\n  onCancel,\n}) => {\n  return (\n    <PopupBase visible={visible}>\n      <PopupOKCancelBlock>\n        {title && <h3>{title}</h3>}\n        <div className=\"message\">{children}</div>\n        <div className=\"button-area\">\n          {onCancel && (\n            <Button color=\"lightGray\" onClick={onCancel}>\n              취소\n            </Button>\n          )}\n          <Button onClick={onConfirm}>확인</Button>\n        </div>\n      </PopupOKCancelBlock>\n    </PopupBase>\n  );\n};\n\nexport default PopupOKCancel;\n","import { deprecated } from 'typesafe-actions';\nimport { createReducer, updateKey } from '../lib/utils';\n\nconst { createStandardAction } = deprecated;\n\nconst CHANGE_MARKDOWN = 'write/CHANGE_MARKDOWN';\nconst CHANGE_TITLE = 'write/CHANGE_TITLE';\nconst CONVERT_EDITOR_MODE = 'write/CONVERT_EDITOR_MODE';\nconst SET_HTML = 'write/SET_HTML';\nconst SET_TEXT_BODY = 'write/SET_TEXT_BODY';\nconst CHANGE_TAGS = 'write/CHANGE_TAGS';\nconst OPEN_PUBLISH = 'write/OPEN_PUBLISH';\nconst CLOSE_PUBLISH = 'write/CLOSE_PUBLISH';\nconst SET_DEFAULT_DESCRIPTION = 'write/SET_DEFAULT_DESCRIPTION';\nconst CHANGE_DESCRIPTION = 'write/CHANGE_DESCRIPTION';\nconst SET_PRIVACY = 'write/SET_PRIVACY';\nconst CHANGE_URL_SLUG = 'write/CHANGE_URL';\nconst SET_THUMBNAIL = 'write/SET_THUMBNAIL';\nconst TOGGLE_EDIT_SERIES = 'write/TOGGLE_EDIT_SERIES';\nconst SELECT_SERIES = 'write/SELECT_SERIES';\nconst CLEAR_EDITOR = 'write/CLEAR_EDITOR';\nconst PREPARE_EDIT = 'write/PREPARE_EDIT';\nconst SET_WRITE_POST_ID = 'write/SET_WRITE_POST_ID';\nconst SET_INITIAL_BODY = 'write/SET_INITIAL_BODY';\nconst SET_INITIAL_TITLE = 'write/SET_INITIAL_TITLE';\n\nexport const changeMarkdown = createStandardAction(CHANGE_MARKDOWN)<string>();\nexport const changeTitle = createStandardAction(CHANGE_TITLE)<string>();\nexport const convertEditorMode = createStandardAction(CONVERT_EDITOR_MODE)();\nexport const setHtml = createStandardAction(SET_HTML)<string>();\nexport const changeTags = createStandardAction(CHANGE_TAGS)<string[]>();\nexport const openPublish = createStandardAction(OPEN_PUBLISH)<void>();\nexport const closePublish = createStandardAction(CLOSE_PUBLISH)<void>();\nexport const setTextBody = createStandardAction(SET_TEXT_BODY)<string>();\nexport const setDefaultDescription = createStandardAction(\n  SET_DEFAULT_DESCRIPTION,\n)<string>();\nexport const changeDescription = createStandardAction(CHANGE_DESCRIPTION)<\n  string\n>();\nexport const setPrivacy = createStandardAction(SET_PRIVACY)<boolean>();\nexport const changeUrlSlug = createStandardAction(CHANGE_URL_SLUG)<string>();\nexport const setThumbnail = createStandardAction(SET_THUMBNAIL)<\n  string | null\n>();\nexport const toggleEditSeries = createStandardAction(TOGGLE_EDIT_SERIES)<\n  undefined\n>();\nexport const selectSeries = createStandardAction(SELECT_SERIES)<{\n  id: string;\n  name: string;\n} | null>();\nexport const clearEditor = createStandardAction(CLEAR_EDITOR)<undefined>();\nexport const setWritePostId = createStandardAction(SET_WRITE_POST_ID)<string>();\nexport const setInitialTitle = createStandardAction(SET_INITIAL_TITLE)<\n  string\n>();\nexport const setInitialBody = createStandardAction(SET_INITIAL_BODY)<string>();\n\nexport type PrepareEditPayload = {\n  id: string;\n  title: string;\n  body: string;\n  tags: string[];\n  description: string;\n  urlSlug: string;\n  series: {\n    name: string;\n    id: string;\n  } | null;\n  isPrivate: boolean;\n  isMarkdown: boolean;\n  isTemp?: boolean;\n  thumbnail: string | null;\n};\n\nexport const prepareEdit = createStandardAction(PREPARE_EDIT)<\n  PrepareEditPayload\n>();\n\ntype ChangeMarkdown = ReturnType<typeof changeMarkdown>;\ntype ChangeTitle = ReturnType<typeof changeTitle>;\ntype SetHtml = ReturnType<typeof setHtml>;\ntype ChangeTags = ReturnType<typeof changeTags>;\ntype OpenPublish = ReturnType<typeof openPublish>;\ntype ClosePublish = ReturnType<typeof closePublish>;\ntype SetTextBody = ReturnType<typeof setTextBody>;\ntype SetDefaultDescription = ReturnType<typeof setDefaultDescription>;\ntype ChangeDescription = ReturnType<typeof changeDescription>;\ntype SetPrivacy = ReturnType<typeof setPrivacy>;\ntype ChangeUrlSlug = ReturnType<typeof changeUrlSlug>;\ntype SetThumbnail = ReturnType<typeof setThumbnail>;\ntype SelectSeries = ReturnType<typeof selectSeries>;\ntype ClearEditor = ReturnType<typeof clearEditor>;\ntype PrepareEdit = ReturnType<typeof prepareEdit>;\ntype SetWritePostId = ReturnType<typeof setWritePostId>;\ntype SetInitialBody = ReturnType<typeof setInitialBody>;\ntype SetInitialTitle = ReturnType<typeof setInitialTitle>;\n\nexport enum WriteMode {\n  MARKDOWN = 'MARKDOWN',\n  WYSIWYG = 'WYSIWYG',\n}\n\nexport type WriteState = {\n  mode: WriteMode;\n  markdown: string;\n  title: string;\n  html: string;\n  tags: string[];\n  publish: boolean; // publish screen visibility\n  textBody: string;\n  defaultDescription: string;\n  description: string;\n  isPrivate: boolean;\n  urlSlug: string;\n  thumbnail: string | null;\n  editSeries: boolean;\n  selectedSeries: {\n    id: string;\n    name: string;\n  } | null;\n  postId: null | string;\n  isTemp: boolean;\n  initialTitle: string;\n  initialBody: string;\n};\n\nconst initialState: WriteState = {\n  mode: WriteMode.MARKDOWN,\n  markdown: '',\n  title: '',\n  html: '',\n  tags: [],\n  publish: false,\n  textBody: '',\n  defaultDescription: '',\n  description: '',\n  isPrivate: false,\n  urlSlug: '',\n  thumbnail: null,\n  editSeries: false,\n  selectedSeries: null,\n  postId: null,\n  isTemp: false,\n  initialTitle: '',\n  initialBody: '',\n};\n\nconst write = createReducer(\n  {\n    [CHANGE_MARKDOWN]: (state, action: ChangeMarkdown) =>\n      updateKey(state, 'markdown', action.payload),\n    [CHANGE_TITLE]: (state, action: ChangeTitle) =>\n      updateKey(state, 'title', action.payload),\n    [CONVERT_EDITOR_MODE]: state =>\n      updateKey(\n        state,\n        'mode',\n        state.mode === WriteMode.MARKDOWN\n          ? WriteMode.WYSIWYG\n          : WriteMode.MARKDOWN,\n      ),\n    [SET_HTML]: (state, action: SetHtml) =>\n      updateKey(state, 'html', action.payload),\n    [CHANGE_TAGS]: (state, action: ChangeTags) =>\n      updateKey(state, 'tags', action.payload),\n    [OPEN_PUBLISH]: state => updateKey(state, 'publish', true),\n    [CLOSE_PUBLISH]: state => updateKey(state, 'publish', false),\n    [SET_TEXT_BODY]: (state, { payload: textBody }: SetTextBody) =>\n      updateKey(state, 'textBody', textBody),\n    [SET_DEFAULT_DESCRIPTION]: (\n      state,\n      { payload: defaultDescription }: SetDefaultDescription,\n    ) => updateKey(state, 'defaultDescription', defaultDescription),\n    [CHANGE_DESCRIPTION]: (\n      state,\n      { payload: description }: ChangeDescription,\n    ) => updateKey(state, 'description', description.slice(0, 150)),\n    [SET_PRIVACY]: (state, { payload: isPrivate }: SetPrivacy) =>\n      updateKey(state, 'isPrivate', isPrivate),\n    [CHANGE_URL_SLUG]: (state, { payload: urlSlug }: ChangeUrlSlug) =>\n      updateKey(state, 'urlSlug', urlSlug),\n    [SET_THUMBNAIL]: (state, { payload: thumbnail }: SetThumbnail) =>\n      updateKey(state, 'thumbnail', thumbnail),\n    [TOGGLE_EDIT_SERIES]: state =>\n      updateKey(state, 'editSeries', !state.editSeries),\n    [SELECT_SERIES]: (state, action: SelectSeries) =>\n      updateKey(state, 'selectedSeries', action.payload),\n    [CLEAR_EDITOR]: () => initialState,\n    [PREPARE_EDIT]: (state, { payload }: PrepareEdit) => {\n      const {\n        isMarkdown,\n        body,\n        title,\n        tags,\n        description,\n        urlSlug,\n        series,\n        id,\n        isPrivate,\n        isTemp,\n        thumbnail,\n      } = payload;\n      const key = isMarkdown ? 'markdown' : 'html';\n      return {\n        ...state,\n        title,\n        tags,\n        description: description.slice(0, 150),\n        urlSlug,\n        isPrivate,\n        isTemp: isTemp || false,\n        mode: isMarkdown ? WriteMode.MARKDOWN : WriteMode.WYSIWYG,\n        [key]: body,\n        selectedSeries: series,\n        postId: id,\n        initialBody: body,\n        initialTitle: title,\n        thumbnail,\n      };\n    },\n    [SET_WRITE_POST_ID]: (state, action: SetWritePostId) => ({\n      ...state,\n      postId: action.payload,\n      isTemp: true,\n    }),\n    [SET_INITIAL_BODY]: (state, action: SetInitialBody) =>\n      updateKey(state, 'initialBody', action.payload),\n    [SET_INITIAL_TITLE]: (state, action: SetInitialTitle) => ({\n      ...state,\n      title: action.payload,\n      initialTitle: action.payload,\n    }),\n  },\n  initialState,\n);\n\nexport default write;\n","import * as React from 'react';\nimport PopupOKCancel from '../common/PopupOKCancel';\nimport { WriteMode } from '../../modules/write';\n\nexport interface AskChangeEditorProps {\n  visible: boolean;\n  onCancel: () => void;\n  onConfirm: () => void;\n  convertTo: WriteMode;\n}\n\nconst AskChangeEditor: React.FC<AskChangeEditorProps> = ({\n  visible,\n  onCancel,\n  onConfirm,\n  convertTo,\n}) => {\n  if (convertTo === WriteMode.MARKDOWN) {\n    return (\n      <PopupOKCancel\n        visible={visible}\n        title=\"마크다운 에디터로 전환\"\n        onCancel={onCancel}\n        onConfirm={onConfirm}\n      >\n        에디터 모드를 전환하시겠습니까?\n        {/* <br />\n        확인을 누르시면 지금까지 입력하신 모든 내용이 마크다운 포맷으료\n        변환됩니다.\n        <br />\n        <br />\n        <div style={{ fontSize: '0.875rem' }}>\n          <b>주의:</b> 변환 후 코드블록의 언어 타입을 수동으로 입력해주셔야\n          합니다.\n        </div> */}\n      </PopupOKCancel>\n    );\n  }\n  return (\n    <PopupOKCancel\n      visible={visible}\n      title=\"쉬운 에디터로 전환\"\n      onCancel={onCancel}\n      onConfirm={onConfirm}\n    >\n      에디터 모드를 전환하시겠습니까?\n    </PopupOKCancel>\n  );\n};\n\nexport default AskChangeEditor;\n","export default function detectIOS() {\n  if (process.env.REACT_APP_SSR === 'enabled') return false;\n\n  // checkAgent for Chrome Developer Menu\n  const checkAgent =\n    /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n\n  const checkPlatform =\n    (/iPad|iPhone|iPod/.test(navigator.platform) ||\n      (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)) &&\n    !window.MSStream;\n\n  return checkAgent || checkPlatform;\n}\n","import * as React from 'react';\nimport styled from 'styled-components';\nimport 'codemirror/lib/codemirror.css';\n// import 'codemirror/theme/dracula.css';\nimport CodeMirror, { EditorFromTextArea } from 'codemirror';\nimport TitleTextarea, { TitleTextareaForSSR } from './TitleTextarea';\nimport '../common/atom-one-light.css';\nimport palette from '../../lib/styles/palette';\nimport Toolbar from './Toolbar';\nimport AddLink from './AddLink';\nimport { detectJSDOM, ssrEnabled } from '../../lib/utils';\nimport AskChangeEditor from './AskChangeEditor';\nimport { WriteMode } from '../../modules/write';\nimport zIndexes from '../../lib/styles/zIndexes';\nimport { useSpring, animated } from 'react-spring';\nimport media, { mediaQuery } from '../../lib/styles/media';\nimport detectIOS from '../../lib/detectIOS';\nrequire('codemirror/mode/markdown/markdown');\nrequire('codemirror/mode/javascript/javascript');\nrequire('codemirror/mode/jsx/jsx');\nrequire('codemirror/addon/display/placeholder');\n\nexport interface MarkdownEditorProps {\n  onChangeMarkdown: (markdown: string) => void;\n  onChangeTitle: (title: string) => void;\n  onConvert: (markdown: string) => void;\n  title: string;\n  markdown: string;\n  tagInput: React.ReactNode;\n  footer: React.ReactNode;\n  // onUpload: () => void;\n  // lastUploadedImage: string | null;\n  initialBody: string;\n}\n\ntype MarkdownEditorState = {\n  addLink: {\n    top: number | null;\n    bottom: number | null;\n    left: number;\n    visible: boolean;\n    stickToRight: boolean;\n  };\n  askChangeEditor: boolean;\n  clientWidth: number;\n  hideUpper: boolean;\n  appleCursorPos: number;\n};\n\ntype CheckerKey = keyof typeof checker;\n\nconst checkEmbed = (text: string) => {\n  const keys = Object.keys(checker) as CheckerKey[];\n  for (let i = 0; i < keys.length; i += 1) {\n    const key = keys[i];\n    const fn = checker[keys[i]];\n    const code = fn(text);\n    if (code) {\n      return `!${key}[${code}]`;\n    }\n  }\n  return null;\n};\n\nconst removeHeading = (text: string) => {\n  return text.replace(/#{1,6} /, '');\n};\n\nfunction WriterHead({\n  hide,\n  children,\n}: {\n  hide: boolean;\n  children: React.ReactNode;\n}) {\n  const screenHeight =\n    (typeof window !== 'undefined' && window.screen.height) || 508;\n\n  const springStyle = useSpring({\n    maxHeight: hide ? 0 : screenHeight * 0.5,\n    opacity: hide ? 0 : 1,\n    config: {\n      duration: 300,\n    },\n  });\n  return (\n    <animated.div style={springStyle}>\n      <PaddingWrapper>{children}</PaddingWrapper>\n    </animated.div>\n  );\n}\n\nexport default class WriteMarkdownEditor extends React.Component<\n  MarkdownEditorProps,\n  MarkdownEditorState\n> {\n  block = React.createRef<HTMLDivElement>();\n  toolbarElement = React.createRef<HTMLDivElement>();\n  editorElement = React.createRef<HTMLTextAreaElement>();\n  appleEditorElement = React.createRef<HTMLTextAreaElement>();\n\n  toolbarTop = 0;\n  state = {\n    addLink: {\n      top: 0,\n      bottom: 0,\n      left: 0,\n      visible: false,\n      stickToRight: false,\n    },\n    askChangeEditor: false,\n    clientWidth: 0,\n    hideUpper: false,\n    appleCursorPos: 0,\n  };\n  codemirror: EditorFromTextArea | null = null;\n  ignore = false;\n  isIOS = detectIOS();\n\n  initialize = () => {\n    if (this.isIOS) return;\n    if (!this.editorElement.current) return;\n    this.codemirror = CodeMirror.fromTextArea(this.editorElement.current, {\n      mode: 'markdown',\n      theme: 'one-light',\n      placeholder: '당신의 이야기를 적어보세요...',\n      // viewportMargin: Infinity,\n      lineWrapping: true,\n    });\n\n    if (detectJSDOM()) return;\n    this.codemirror.setValue(this.props.initialBody);\n    this.codemirror.on('change', cm => {\n      this.props.onChangeMarkdown(cm.getValue());\n      this.stickToBottomIfNeeded();\n      const doc = cm.getDoc();\n\n      // scroll to bottom when editing last 5\n      const { line } = doc.getCursor();\n      const last = doc.lastLine();\n      if (last - line < 5) {\n        const preview = document.getElementById('preview');\n        if (!preview) return;\n        preview.scrollTop = preview.scrollHeight;\n      }\n    });\n\n    this.codemirror.on('scroll', cm => {\n      const info = cm.getScrollInfo();\n\n      if (info.top > 0 && info.height > window.screen.height) {\n        this.setState({ hideUpper: true });\n      } else {\n        this.setState({ hideUpper: false });\n      }\n    });\n\n    this.codemirror.on('dragover', (cm, e) => {\n      if (e.dataTransfer) {\n        e.dataTransfer.dropEffect = 'copy';\n      }\n    });\n\n    this.codemirror.on('mousewheel', cm => {\n      console.log(cm.getScrollInfo());\n    });\n\n    this.codemirror.on('paste', ((editor: any, e: any) => {\n      const clipboardData = e.clipboardData || e.originalEvent.clipboardData;\n      if (!clipboardData) return;\n\n      // replace text for embedding youtube, twitte, etc\n      const text = clipboardData.getData('Text');\n      const check = checkEmbed(text);\n      if (check) {\n        const selection = editor.getSelection();\n        e.preventDefault();\n        if (selection.length > 0) {\n          editor.replaceSelection(check);\n        } else {\n          const doc = editor.getDoc();\n          const cursor = doc.getCursor();\n          const pos = {\n            line: cursor.line,\n            ch: cursor.ch,\n          };\n          doc.replaceRange(check, pos);\n        }\n        return;\n      }\n\n      const { items } = clipboardData;\n      if (!items) return;\n      if (items.length !== 2) return;\n      if (items[1].kind === 'file') {\n        e.preventDefault();\n      }\n    }) as any);\n  };\n\n  stickToBottomIfNeeded = () => {\n    if (!this.block.current) return;\n    const { scrollHeight, scrollTop, clientHeight } = this.block.current;\n    const scrollBottom = scrollHeight - scrollTop - clientHeight;\n    if (scrollBottom < 192) {\n      this.block.current.scrollTo(0, scrollHeight);\n    }\n  };\n\n  handleResize = () => {\n    if (this.block.current) {\n      this.setState({\n        clientWidth: this.block.current.clientWidth,\n      });\n    }\n  };\n\n  addImageToEditor = (image: string) => {\n    if (this.isIOS) {\n      const textarea = this.appleEditorElement.current;\n      if (!textarea) return;\n      const { markdown, onChangeMarkdown } = this.props;\n\n      const cursorPos = textarea.selectionEnd;\n      const textBefore = markdown.slice(0, cursorPos);\n      const textAfter = markdown.slice(cursorPos, markdown.length);\n      const imageMarkdown = `![](${encodeURI(image)})`;\n      const nextMarkdown = `${textBefore}${imageMarkdown}${textAfter}`;\n      onChangeMarkdown(nextMarkdown);\n      setTimeout(() => {\n        textarea.focus();\n        const nextCursorPos = cursorPos + imageMarkdown.length;\n        textarea.selectionStart = nextCursorPos;\n        textarea.selectionEnd = nextCursorPos;\n      }, 0);\n      return;\n    }\n    if (!this.codemirror) return;\n    this.codemirror.getDoc().replaceSelection(`![](${encodeURI(image)})`);\n  };\n\n  componentDidUpdate(prevProps: MarkdownEditorProps) {\n    // const { /* lastUploadedImage, */ initialBody } = this.props;\n    // if (initialBody !== prevProps.initialBody) {\n    //   if (!this.codemirror) return;\n    //   if (this.codemirror.getValue() === this.props.initialBody) return;\n    //   this.codemirror.setValue(this.props.initialBody);\n    // }\n    // if (\n    //   lastUploadedImage &&\n    //   prevProps.lastUploadedImage !== lastUploadedImage\n    // ) {\n    //   this.addImageToEditor(lastUploadedImage);\n    // }\n  }\n\n  componentDidMount() {\n    this.initialize();\n    setTimeout(() => {\n      if (this.toolbarElement.current) {\n        this.toolbarTop = this.toolbarElement.current.getBoundingClientRect().top;\n      }\n    });\n    if (this.block.current) {\n      this.setState({\n        clientWidth: this.block.current.clientWidth,\n      });\n    }\n    window.addEventListener('resize', this.handleResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.handleResize);\n  }\n\n  handleOpenAddLink = () => {\n    if (!this.codemirror) return;\n    const doc = this.codemirror.getDoc();\n    const cursor = doc.getCursor();\n    const cursorPos = this.codemirror.cursorCoords(cursor);\n    if (!this.block.current) return;\n    const stickToRight = cursorPos.left > this.block.current.clientWidth - 341;\n    const calculatedTop =\n      this.block.current.scrollTop +\n      cursorPos.top +\n      this.codemirror.defaultTextHeight() / 2 +\n      1;\n\n    const isAtBottom = calculatedTop + 173 > this.block.current?.clientHeight;\n    const pos = isAtBottom\n      ? { top: null, bottom: 64 }\n      : { top: calculatedTop, bottom: null };\n    this.setState({\n      addLink: {\n        visible: true,\n        ...pos,\n        left: cursorPos.left,\n        stickToRight,\n      },\n    });\n  };\n\n  handleConfirmAddLink = (link: string) => {\n    // 링크삽입하는 내용\n    this.setState({\n      addLink: {\n        ...this.state.addLink,\n        visible: false,\n      },\n    });\n    if (!this.codemirror) return;\n    const doc = this.codemirror.getDoc();\n    const selection = doc.getSelection();\n    const cursor = doc.getCursor('end');\n    this.codemirror.focus();\n    if (selection.length === 0) {\n      doc.replaceSelection(`[링크텍스트](${link})`);\n      doc.setSelection(\n        {\n          line: cursor.line,\n          ch: cursor.ch + 1,\n        },\n        {\n          line: cursor.line,\n          ch: cursor.ch + 6,\n        },\n      );\n      return;\n    }\n    doc.replaceSelection(`[${selection}](${link})`);\n    doc.setCursor({\n      line: cursor.line,\n      ch: cursor.ch + link.length + 4,\n    });\n  };\n\n  handleCancelAddLink = () => {\n    this.setState({\n      addLink: {\n        ...this.state.addLink,\n        visible: false,\n      },\n    });\n  };\n\n  handleToolbarClickForApple = (mode: string) => {\n    if (!this.appleEditorElement.current) return;\n    const cursorPos = this.appleEditorElement.current?.selectionStart || 0;\n    const { markdown, onChangeMarkdown } = this.props;\n    const sliced = markdown.slice(0, cursorPos);\n\n    // const lineNumber = sliced.split('\\n').length;\n    const lastNewLineIndex = sliced.lastIndexOf('\\n');\n    const textBefore = sliced.slice(0, lastNewLineIndex + 1);\n    const textAfter = markdown.slice(lastNewLineIndex + 1, markdown.length);\n    let currentNewLineIndex = textAfter.indexOf('\\n');\n    if (currentNewLineIndex === -1) currentNewLineIndex = textAfter.length;\n\n    const lineText = textAfter.slice(0, currentNewLineIndex);\n    const textBelowCurrentLine = textAfter.slice(\n      currentNewLineIndex,\n      textAfter.length,\n    );\n\n    const setCursorPos = (pos: number) => {\n      setTimeout(() => {\n        this.appleEditorElement.current!.selectionStart = pos;\n        this.appleEditorElement.current!.selectionEnd = pos;\n      }, 0);\n    };\n\n    console.log({ lineText });\n    const handlers: {\n      [key: string]: () => void;\n    } = {\n      heading1: () => {\n        const applied = /^# /.test(lineText);\n        if (applied) {\n          const replacedLine = lineText.replace(/^# /, '');\n          onChangeMarkdown(\n            `${textBefore}${replacedLine}${textBelowCurrentLine}`,\n          );\n          setCursorPos(cursorPos - 2);\n          return;\n        }\n\n        const anotherHeading = /^#{1,4} /.test(lineText);\n        if (anotherHeading) {\n          const replacedLine = lineText.replace(/^#{1,4} /, '# ');\n          onChangeMarkdown(\n            `${textBefore}${replacedLine}${textBelowCurrentLine}`,\n          );\n          const posDiff = replacedLine.length - lineText.length;\n          setCursorPos(cursorPos + posDiff);\n\n          return;\n        }\n\n        onChangeMarkdown(`${textBefore}# ${textAfter}`);\n        // this.appleEditorElement.current!.selectionStart = cursorPos;\n        setCursorPos(cursorPos + 2);\n      },\n      heading2: () => {\n        const applied = /^## /.test(lineText);\n        if (applied) {\n          const replacedLine = lineText.replace(/^## /, '');\n          onChangeMarkdown(\n            `${textBefore}${replacedLine}${textBelowCurrentLine}`,\n          );\n          setCursorPos(cursorPos - 3);\n\n          return;\n        }\n\n        const anotherHeading = /^#{1,4} /.test(lineText);\n        if (anotherHeading) {\n          const replacedLine = lineText.replace(/^#{1,4} /, '## ');\n          onChangeMarkdown(\n            `${textBefore}${replacedLine}${textBelowCurrentLine}`,\n          );\n          const posDiff = replacedLine.length - lineText.length;\n          setCursorPos(cursorPos + posDiff);\n          return;\n        }\n\n        onChangeMarkdown(`${textBefore}## ${textAfter}`);\n        setCursorPos(cursorPos + 3);\n      },\n      heading3: () => {\n        const applied = /^### /.test(lineText);\n        if (applied) {\n          const replacedLine = lineText.replace(/^### /, '');\n          onChangeMarkdown(\n            `${textBefore}${replacedLine}${textBelowCurrentLine}`,\n          );\n          setCursorPos(cursorPos - 4);\n\n          return;\n        }\n\n        const anotherHeading = /^#{1,4} /.test(lineText);\n        if (anotherHeading) {\n          const replacedLine = lineText.replace(/^#{1,4} /, '### ');\n          onChangeMarkdown(\n            `${textBefore}${replacedLine}${textBelowCurrentLine}`,\n          );\n          const posDiff = replacedLine.length - lineText.length;\n          setCursorPos(cursorPos + posDiff);\n          return;\n        }\n\n        onChangeMarkdown(`${textBefore}### ${textAfter}`);\n        setCursorPos(cursorPos + 4);\n      },\n      heading4: () => {\n        const applied = /^#### /.test(lineText);\n        if (applied) {\n          const replacedLine = lineText.replace(/^#### /, '');\n          onChangeMarkdown(\n            `${textBefore}${replacedLine}${textBelowCurrentLine}`,\n          );\n          setCursorPos(cursorPos - 5);\n\n          return;\n        }\n\n        const anotherHeading = /^#{1,4} /.test(lineText);\n        if (anotherHeading) {\n          const replacedLine = lineText.replace(/^#{1,4} /, '#### ');\n          onChangeMarkdown(\n            `${textBefore}${replacedLine}${textBelowCurrentLine}`,\n          );\n          const posDiff = replacedLine.length - lineText.length;\n          setCursorPos(cursorPos + posDiff);\n          return;\n        }\n\n        onChangeMarkdown(`${textBefore}#### ${textAfter}`);\n        setCursorPos(cursorPos + 5);\n      },\n      image: () => {\n        // this.props.onUpload();\n      },\n    };\n\n    this.appleEditorElement.current!.focus();\n    handlers[mode]();\n\n    // const handlers: {\n    //   [key: string]: Function;\n    // } = {\n    //   ...[1, 2, 3, 4] // creates handlers for heading1, heading2, heading3, heading4\n    //     .map(number => () => {\n    //       // create handler function\n    //       const characters = '#'.repeat(number);\n    //       const plain = removeHeading(line);\n    //       selectWholeLine();\n    //       doc.replaceSelection(`${characters} ${plain}`);\n    //     })\n    //     .reduce((headingHandlers, handler, index) => {\n    //       // reduce into handlers object\n    //       return Object.assign(headingHandlers, {\n    //         [`heading${index + 1}`]: handler,\n    //       });\n    //     }, {}),\n    // };\n  };\n\n  handleToolbarClick = (mode: string) => {\n    const codemirror = this.codemirror;\n    if (this.isIOS) return this.handleToolbarClickForApple(mode);\n\n    if (!codemirror) return;\n    const doc = codemirror.getDoc();\n\n    const cursor = doc.getCursor();\n    const selection = {\n      start: doc.getCursor('start'),\n      end: doc.getCursor('end'),\n    };\n\n    const line = doc.getLine(cursor.line);\n\n    const selectWholeLine = () => {\n      doc.setSelection(\n        {\n          line: cursor.line,\n          ch: 0,\n        },\n        {\n          line: cursor.line,\n          ch: line.length,\n        },\n      );\n    };\n\n    const handlers: {\n      [key: string]: Function;\n    } = {\n      ...[1, 2, 3, 4] // creates handlers for heading1, heading2, heading3, heading4\n        .map(number => () => {\n          // create handler function\n          const characters = '#'.repeat(number);\n          const plain = removeHeading(line);\n          selectWholeLine();\n          doc.replaceSelection(`${characters} ${plain}`);\n        })\n        .reduce((headingHandlers, handler, index) => {\n          // reduce into handlers object\n          return Object.assign(headingHandlers, {\n            [`heading${index + 1}`]: handler,\n          });\n        }, {}),\n      bold: () => {\n        const selected = doc.getSelection();\n        if (selected === '텍스트') {\n          const isBold = /\\*\\*(.*)\\*\\*/.test(\n            doc.getRange(\n              { line: selection.start.line, ch: selection.start.ch - 2 },\n              { line: selection.end.line, ch: selection.end.ch + 2 },\n            ),\n          );\n\n          if (isBold) {\n            doc.setSelection(\n              { line: selection.start.line, ch: selection.start.ch - 2 },\n              { line: selection.end.line, ch: selection.end.ch + 2 },\n            );\n            doc.replaceSelection('텍스트');\n            doc.setSelection(\n              { line: selection.start.line, ch: selection.start.ch - 2 },\n              { line: selection.end.line, ch: selection.end.ch - 2 },\n            );\n            return;\n          }\n        }\n        if (/\\*\\*(.*)\\*\\*/.test(selected)) {\n          // matches **string**\n          doc.replaceSelection(selected.replace(/\\*\\*/g, ''));\n          doc.setSelection(\n            {\n              line: selection.start.line,\n              ch: selection.start.ch,\n            },\n            { line: selection.end.line, ch: selection.end.ch - 4 },\n          );\n          return;\n        }\n        if (selected.length > 0) {\n          doc.replaceSelection(`**${selected}**`);\n          doc.setSelection(\n            {\n              line: selection.start.line,\n              ch: selection.start.ch,\n            },\n            { line: selection.end.line, ch: selection.end.ch + 4 },\n          );\n          return;\n        }\n        doc.replaceSelection('**텍스트**');\n        doc.setSelection(\n          {\n            line: cursor.line,\n            ch: cursor.ch + 2,\n          },\n          {\n            line: cursor.line,\n            ch: cursor.ch + 5,\n          },\n        );\n      },\n      italic: () => {\n        let selected = doc.getSelection();\n\n        if (selected.length === 0) {\n          doc.replaceSelection(`_텍스트_`);\n          doc.setSelection(\n            {\n              line: cursor.line,\n              ch: cursor.ch + 1,\n            },\n            {\n              line: cursor.line,\n              ch: cursor.ch + 4,\n            },\n          );\n          return;\n        }\n\n        if (selected === '텍스트') {\n          const selectLeftAndRight = doc.getRange(\n            {\n              line: selection.start.line,\n              ch: selection.start.ch - 1,\n            },\n            {\n              line: selection.end.line,\n              ch: selection.end.ch + 1,\n            },\n          );\n          if (/_(.*)_/.test(selectLeftAndRight)) {\n            selected = selectLeftAndRight;\n            doc.setSelection(\n              {\n                line: selection.start.line,\n                ch: selection.start.ch - 1,\n              },\n              {\n                line: selection.end.line,\n                ch: selection.end.ch + 1,\n              },\n            );\n            selection.start = {\n              line: selection.start.line,\n              ch: selection.start.ch - 1,\n            };\n            selection.end = {\n              line: selection.end.line,\n              ch: selection.end.ch + 1,\n            };\n          }\n        }\n\n        if (/_(.*)_/.test(selected)) {\n          const plain = selected\n            .replace(/^_/, '') // remove starting _\n            .replace(/_$/, ''); // remove ending _\n          doc.replaceSelection(plain);\n          doc.setSelection(\n            {\n              line: selection.start.line,\n              ch: selection.start.ch,\n            },\n            { line: selection.end.line, ch: selection.end.ch - 2 },\n          );\n          return;\n        }\n        if (selected.length > 0) {\n          doc.replaceSelection(`_${selected}_`);\n          doc.setSelection(\n            {\n              line: selection.start.line,\n              ch: selection.start.ch,\n            },\n            { line: selection.end.line, ch: selection.end.ch + 2 },\n          );\n        }\n      },\n      strike: () => {\n        let selected = doc.getSelection();\n\n        if (selected.length === 0) {\n          doc.replaceSelection(`~~텍스트~~`);\n          doc.setSelection(\n            {\n              line: cursor.line,\n              ch: cursor.ch + 2,\n            },\n            {\n              line: cursor.line,\n              ch: cursor.ch + 5,\n            },\n          );\n          return;\n        }\n\n        if (selected === '텍스트') {\n          const selectLeftAndRight = doc.getRange(\n            {\n              line: selection.start.line,\n              ch: selection.start.ch - 2,\n            },\n            {\n              line: selection.end.line,\n              ch: selection.end.ch + 2,\n            },\n          );\n          if (/~~(.*)~~/.test(selectLeftAndRight)) {\n            selected = selectLeftAndRight;\n            doc.setSelection(\n              {\n                line: selection.start.line,\n                ch: selection.start.ch - 2,\n              },\n              {\n                line: selection.end.line,\n                ch: selection.end.ch + 2,\n              },\n            );\n            selection.start = {\n              line: selection.start.line,\n              ch: selection.start.ch - 2,\n            };\n            selection.end = {\n              line: selection.end.line,\n              ch: selection.end.ch + 2,\n            };\n          }\n        }\n\n        if (/~~(.*)~~/.test(selected)) {\n          const plain = selected\n            .replace(/^~~/, '') // remove starting ~~\n            .replace(/~~$/, ''); // remove ending ~~\n          doc.replaceSelection(plain);\n          doc.setSelection(\n            {\n              line: selection.start.line,\n              ch: selection.start.ch,\n            },\n            { line: selection.end.line, ch: selection.end.ch - 4 },\n          );\n          return;\n        }\n        if (selected.length > 0) {\n          doc.replaceSelection(`~~${selected}~~`);\n          doc.setSelection(\n            {\n              line: selection.start.line,\n              ch: selection.start.ch,\n            },\n            { line: selection.end.line, ch: selection.end.ch + 4 },\n          );\n        }\n      },\n      blockquote: () => {\n        const matches = /^> /.test(line);\n        doc.setSelection(\n          { line: cursor.line, ch: 0 },\n          { line: cursor.line, ch: line.length },\n        );\n        if (matches) {\n          doc.replaceSelection(line.replace(/^> /, ''));\n          doc.setCursor({\n            line: cursor.line,\n            ch: cursor.ch - 2,\n          });\n        } else {\n          doc.replaceSelection(`> ${line}`);\n          doc.setCursor({\n            line: cursor.line,\n            ch: cursor.ch + 2,\n          });\n        }\n      },\n      link: () => {\n        this.handleOpenAddLink();\n      },\n      image: () => {\n        // this.props.onUpload();\n      },\n      codeblock: () => {\n        const selected = doc.getSelection();\n        if (selected.length === 0) {\n          doc.replaceSelection('```\\n코드를 입력하세요\\n```');\n          doc.setSelection(\n            {\n              line: cursor.line + 1,\n              ch: 0,\n            },\n            {\n              line: cursor.line + 1,\n              ch: 9,\n            },\n          );\n          return;\n        }\n        doc.replaceSelection(`\\`\\`\\`\n${selected}\n\\`\\`\\``);\n      },\n    };\n\n    const handler = handlers[mode];\n    if (!handler) return;\n\n    handler();\n    codemirror.focus();\n  };\n\n  handleTitleChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.props.onChangeTitle(e.target.value);\n  };\n\n  handleAskConvert = () => {\n    this.setState({\n      askChangeEditor: true,\n    });\n  };\n\n  handleConfirmConvert = () => {\n    this.setState({\n      askChangeEditor: false,\n    });\n    if (!this.codemirror) return;\n    const markdown = this.codemirror.getValue();\n    this.props.onConvert(markdown);\n  };\n\n  handleCancelConvert = () => {\n    this.setState({\n      askChangeEditor: false,\n    });\n  };\n\n  handleAppleTextareaChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.props.onChangeMarkdown(e.target.value);\n    this.setState({\n      appleCursorPos: e.target.selectionStart,\n    });\n  };\n\n  public render() {\n    const { addLink, clientWidth } = this.state;\n    const { title, tagInput, footer } = this.props;\n    return (\n      <MarkdownEditorBlock ref={this.block} data-testid=\"codemirror\">\n        <div className=\"wrapper\">\n          <WriterHead hide={this.state.hideUpper}>\n            {ssrEnabled ? (\n              <TitleTextareaForSSR placeholder=\"제목을 입력하세요\" rows={1} />\n            ) : (\n              <TitleTextarea\n                placeholder=\"제목을 입력하세요\"\n                onChange={this.handleTitleChange}\n                value={title}\n              />\n            )}\n            <HorizontalBar />\n            {tagInput}\n          </WriterHead>\n          <Toolbar\n            shadow={this.state.hideUpper}\n            mode=\"MARKDOWN\"\n            onClick={this.handleToolbarClick}\n            onConvert={this.handleAskConvert}\n            innerRef={this.toolbarElement}\n            ios={this.isIOS}\n          />\n          <MarkdownWrapper>\n            {addLink.visible && (\n              <AddLink\n                defaultValue=\"\"\n                left={addLink.left}\n                top={addLink.top}\n                bottom={addLink.bottom}\n                stickToRight={addLink.stickToRight}\n                onConfirm={this.handleConfirmAddLink}\n                onClose={this.handleCancelAddLink}\n              />\n            )}\n            <textarea ref={this.editorElement} style={{ display: 'none' }} />\n            {this.isIOS && (\n              <AppleTextarea\n                onChange={this.handleAppleTextareaChange}\n                ref={this.appleEditorElement}\n                value={this.props.markdown}\n              />\n            )}\n          </MarkdownWrapper>\n        </div>\n        <AskChangeEditor\n          visible={this.state.askChangeEditor}\n          onConfirm={this.handleConfirmConvert}\n          onCancel={this.handleCancelConvert}\n          convertTo={WriteMode.WYSIWYG}\n        />\n        <FooterWrapper style={{ width: clientWidth || '50%' }}>\n          {footer}\n        </FooterWrapper>\n      </MarkdownEditorBlock>\n    );\n  }\n}\n\nconst MarkdownEditorBlock = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n\n  &::-webkit-scrollbar {\n    border-radius: 3px;\n    width: 6px;\n    &:hover {\n      width: 16px;\n    }\n    background: ${palette.gray1};\n  }\n\n  &::-webkit-scrollbar-thumb {\n    z-index: 100;\n    background: ${palette.gray9};\n    /* -webkit-box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.75); */\n  }\n\n  & > .wrapper {\n    min-height: 0;\n    padding-bottom: 4rem;\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .CodeMirror-lines {\n    padding: 4px 0; /* Vertical padding around content */\n    padding-bottom: 3rem;\n  }\n\n  .CodeMirror pre.CodeMirror-line,\n  .CodeMirror pre.CodeMirror-line-like {\n    padding: 0 3rem; /* Horizontal padding of content */\n    ${mediaQuery(767)} {\n      padding: 0 1rem;\n    }\n  }\n\n  .CodeMirror {\n    min-height: 0;\n    flex: 1;\n    font-size: 1.125rem;\n    line-height: 1.5;\n    color: ${palette.gray8};\n    font-family: 'Fira Mono', monospace;\n    /* font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', */\n    .cm-header {\n      line-height: 1.5;\n      color: ${palette.gray9};\n    }\n    .cm-header-1 {\n      font-size: 2.5rem;\n    }\n    .cm-header-2 {\n      font-size: 2rem;\n    }\n    .cm-header-3 {\n      font-size: 1.5rem;\n    }\n    .cm-header-4,\n    .cm-header-5,\n    .cm-header-6 {\n      font-size: 1.3125rem;\n    }\n    .cm-strong,\n    .cm-em {\n      color: ${palette.gray9};\n    }\n    .CodeMirror-placeholder {\n      color: ${palette.gray5};\n      font-style: italic;\n    }\n\n    ${media.custom(767)} {\n      font-size: 0.875rem;\n      .cm-header-1 {\n        font-size: 2rem;\n      }\n      .cm-header-2 {\n        font-size: 1.5rem;\n      }\n      .cm-header-3 {\n        font-size: 1.15rem;\n      }\n      .cm-header-4,\n      .cm-header-5,\n      .cm-header-6 {\n        font-size: 1rem;\n      }\n    }\n  }\n`;\n\nconst HorizontalBar = styled.div`\n  background: ${palette.gray7};\n  height: 6px;\n  width: 4rem;\n  margin-top: 1.5rem;\n  margin-bottom: 1rem;\n  ${mediaQuery(767)} {\n    margin-top: 1rem;\n    margin-bottom: 0.66rem;\n  }\n  border-radius: 1px;\n`;\n\nconst PaddingWrapper = styled.div`\n  padding-top: 2rem;\n  padding-left: 3rem;\n  padding-right: 3rem;\n  ${mediaQuery(767)} {\n    padding: 1rem;\n  }\n`;\n\nconst MarkdownWrapper = styled.div`\n  flex: 1;\n  min-height: 0;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst FooterWrapper = styled.div`\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  z-index: ${zIndexes.WriteFooter};\n`;\n\nconst AppleTextarea = styled.textarea`\n  flex: 1;\n  outline: none;\n  font-size: 1.125rem;\n  padding-left: 3rem;\n  padding-right: 3rem;\n  line-height: 1.5;\n  padding-bottom: 3rem;\n  color: ${palette.gray8};\n  ${media.custom(767)} {\n    font-size: 0.875rem;\n    padding-left: 1rem;\n    padding-right: 1rem;\n    padding-bottom: 1rem;\n  }\n`;\n\nconst checker = {\n  youtube: (text: string) => {\n    const regex = /^<iframe.*src=\"https:\\/\\/www.youtube.com\\/embed\\/(.*?)\".*<\\/iframe>$/;\n    const result = regex.exec(text);\n    if (!result) return null;\n    return result[1];\n  },\n  twitter: (text: string) => {\n    if (!/^<blockquote class=\"twitter-tweet/.test(text)) return null;\n    const regex = /href=\"(.*?)\"/g;\n    const links = [];\n    let match = regex.exec(text);\n    while (match) {\n      links.push(match[1]);\n      match = regex.exec(text);\n    }\n    const pathMatch = /twitter.com\\/(.*?)\\?/.exec(links[links.length - 1]);\n    if (!pathMatch) return null;\n    return pathMatch[1];\n  },\n  codesandbox: (text: string) => {\n    const regex = /^<iframe.*src=\"https:\\/\\/codesandbox.io\\/embed\\/(.*?)\".*<\\/iframe>$/s;\n    const result = regex.exec(text);\n    if (!result) return null;\n    return result[1];\n  },\n  codepen: (text: string) => {\n    const regex = /^<iframe.*src=\"https:\\/\\/codepen.io\\/(.*?)\".*/;\n    const result = regex.exec(text);\n    console.log(result);\n    if (!result) return null;\n    return result[1];\n  },\n};\n","import * as React from 'react';\nimport styled from 'styled-components';\nimport palette from '../../lib/styles/palette';\nimport transitions from '../../lib/styles/transitions';\nimport { mediaQuery } from '../../lib/styles/media';\nimport { useTransition, animated } from 'react-spring';\n\nexport interface TagInputProps {\n  ref?: React.RefObject<HTMLDivElement>;\n  tags: string[];\n  onChange: (tags: string[]) => void;\n}\n\nconst TagItem: React.FC<{\n  onClick: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n}> = ({ onClick, children }) => {\n  return <Tag onClick={onClick}>{children}</Tag>;\n};\n\nconst { useState, useCallback, useEffect, useRef } = React;\nconst TagInput: React.FC<TagInputProps> = ({ onChange, tags: initialTags }) => {\n  const [tags, setTags] = useState<string[]>(initialTags);\n  const [value, setValue] = useState('');\n  const [focus, setFocus] = useState(false);\n  const ignore = useRef(false);\n  const editableDiv = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (tags.length === 0) return;\n    onChange(tags);\n  }, [tags, onChange]);\n\n  useEffect(() => {\n    setTags(initialTags);\n  }, [initialTags]);\n\n  const onChangeInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setValue(e.target.value);\n  };\n\n  useEffect(() => {\n    if (editableDiv.current) {\n      if (value === '') {\n        editableDiv.current.innerText = value;\n      }\n    }\n  }, [value]);\n\n  const insertTag = useCallback(\n    (tag: string) => {\n      ignore.current = true;\n      setValue('');\n      if (tag === '' || tags.includes(tag)) return;\n      let processed = tag;\n      processed = tag.trim();\n      if (processed.indexOf(' #') > 0) {\n        const tempTags: string[] = [];\n        const regex = /#(\\S+)/g;\n        let execArray: RegExpExecArray | null = null;\n        while ((execArray = regex.exec(processed))) {\n          if (execArray !== null) {\n            tempTags.push(execArray[1]);\n          }\n        }\n        setTags([...tags, ...tempTags]);\n        return;\n      }\n      if (processed.charAt(0) === '#') {\n        processed = processed.slice(1, processed.length);\n      }\n      setTags([...tags, processed]);\n    },\n    [tags],\n  );\n\n  const onKeyDown = useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement>) => {\n      if (e.key === 'Backspace' && value === '') {\n        setTags(tags.slice(0, tags.length - 1));\n        return;\n      }\n      const keys = [',', 'Enter'];\n      if (keys.includes(e.key)) {\n        // 등록\n        e.preventDefault();\n        insertTag(value);\n      }\n    },\n    [insertTag, tags, value],\n  );\n\n  const onRemove = (tag: string) => {\n    const nextTags = tags.filter(t => t !== tag);\n    setTags(nextTags);\n  };\n\n  return (\n    <TagInputBlock>\n      {tags.map(tag => (\n        <TagItem key={tag} onClick={() => onRemove(tag)}>\n          {tag}\n        </TagItem>\n      ))}\n      <StyledInput\n        placeholder=\"태그를 입력하세요\"\n        tabIndex={2}\n        onKeyDown={onKeyDown}\n        onChange={onChangeInput}\n        value={value}\n        onFocus={() => setFocus(true)}\n        onBlur={() => setFocus(false)}\n      />\n      <Help focus={focus} />\n    </TagInputBlock>\n  );\n};\n\nfunction Help({ focus }: { focus: boolean }) {\n  const transitions = useTransition(focus, null, {\n    from: { opacity: 0, transform: 'translateY(-1rem)' },\n    enter: { opacity: 1, transform: 'translateY(0rem)' },\n    leave: { opacity: 0, transform: 'translateY(-1rem)' },\n    config: {\n      tension: 350,\n      friction: 22,\n    },\n  });\n\n  return (\n    <HelpBlock>\n      {transitions.map(({ item, key, props }) =>\n        item ? (\n          <animated.div className=\"inside\" style={props} key={key}>\n            쉼표 혹은 엔터를 입력하여 태그를 등록 할 수 있습니다.\n            <br />\n            등록된 태그를 클릭하면 삭제됩니다.\n          </animated.div>\n        ) : null,\n      )}\n    </HelpBlock>\n  );\n}\n\nconst HelpBlock = styled.div`\n  display: block;\n  width: 100%;\n\n  color: ${palette.gray7};\n  transition: ease-in 0.125s;\n\n  & > .inside {\n    position: absolute;\n    background: ${palette.gray8};\n    color: white;\n    padding: 0.75rem;\n    z-index: 20;\n    line-height: 1.5;\n    font-size: 0.75rem;\n  }\n`;\n\nconst TagInputBlock = styled.div`\n  color: ${palette.gray8};\n  font-size: 1.125rem;\n\n  display: flex;\n  flex-wrap: wrap;\n  [contenteditable='true']:empty:before {\n    content: attr(placeholder);\n    display: block; /* For Firefox */\n    color: ${palette.gray5};\n  }\n`;\nconst StyledInput = styled.input`\n  display: inline-flex;\n  outline: none;\n  cursor: text;\n  font-size: 1.125rem;\n  line-height: 2rem;\n  ${mediaQuery(767)} {\n    line-height: 1.5rem;\n    font-size: 0.75rem;\n  }\n  margin-bottom: 0.75rem;\n  min-width: 8rem;\n  border: none;\n`;\n\nconst Tag = styled.div`\n  color: ${palette.gray9};\n  font-size: 1rem;\n  display: inline-flex;\n  align-items: center;\n  height: 2rem;\n  border-radius: 1rem;\n  padding-left: 1rem;\n  padding-right: 1rem;\n  background: ${palette.gray1};\n  color: ${palette.teal7};\n  margin-right: 0.75rem;\n  transition: ease-in 0.125s;\n  cursor: pointer;\n  &:hover {\n    opacity: 0.6;\n  }\n  margin-bottom: 0.75rem;\n  animation: ${transitions.popIn} 0.125s forwards ease-in-out;\n  ${mediaQuery(767)} {\n    height: 1.5rem;\n    font-size: 0.75rem;\n    border-radius: 0.75rem;\n    padding-left: 0.75rem;\n    padding-right: 0.75rem;\n    margin-right: 0.5rem;\n    margin-bottom: 0.5rem;\n  }\n`;\n\nexport default TagInput;\n","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { RootState } from '../../modules';\nimport TagInput from '../../components/write/TagInput';\nimport { changeTags } from '../../modules/write';\n\ninterface OwnProps {}\ntype StateProps = ReturnType<typeof mapStateToProps>;\ntype DispatchProps = typeof mapDispatchToProps;\nexport type TagInputContainerProps = OwnProps & StateProps & DispatchProps;\n\nconst mapStateToProps = (state: RootState) => ({\n  tags: state.write.tags,\n});\nconst mapDispatchToProps = {\n  changeTags,\n};\n\nconst TagInputContainer: React.FC<TagInputContainerProps> = ({\n  tags,\n  changeTags,\n}) => {\n  return <TagInput tags={tags} onChange={changeTags} />;\n};\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n  mapStateToProps,\n  mapDispatchToProps,\n)(TagInputContainer);\n","import * as React from 'react';\nimport styled from 'styled-components';\nimport Button from '../common/Button';\nimport { MdArrowBack } from 'react-icons/md';\nimport media from '../../lib/styles/media';\n\n\nconst WriteFooterBlock = styled.div`\n  padding-left: 1rem;\n  padding-right: 1rem;\n  height: 4rem;\n  width: 100%;\n  box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);\n  background: rgba(255, 255, 255, 0.85);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst Group = styled.div`\n  justify-content: flex-end;\n  align-items: center;\n`;\n\nconst StyledButton = styled(Button)`\n  height: 2.5rem;\n  font-size: 1.125rem;\n  & + & {\n    margin-left: 0.75rem;\n  }\n`;\n\nconst BackButton = styled.button`\n  height: 2.5rem;\n  padding: 0.5rem 1rem;\n  align-items: center;\n  background: none;\n  border-radius: 4px;\n  cursor: pointer;\n  border: none;\n  display: flex;\n  outline: none;\n  &:hover,\n  &:focus {\n    background: rgba(0, 0, 0, 0.05);\n  }\n  svg {\n    font-size: 1.25rem;\n    margin-right: 0.5rem;\n  }\n  span {\n    font-size: 1.125rem;\n    ${media.xsmall} {\n      display: none;\n    }\n  }\n`;\n\nexport interface WriteFooterProps {\n  // onTempSave: (notify?: boolean) => void;\n  // onPublish: () => void;\n  onGoBack: () => void;\n  edit: boolean;\n}\n\nconst WriteFooter: React.FC<WriteFooterProps> = ({\n  onGoBack,\n  // onTempSave,\n  // onPublish,\n  edit,\n}) => {\n  return (\n    <WriteFooterBlock>\n      <BackButton onClick={onGoBack}>\n        <MdArrowBack />\n        <span>나가기</span>\n      </BackButton>\n      <Group>\n    <StyledButton inline color=\"lightGray\" /*onClick={() => onTempSave(true)}*/>\n          임시저장\n        </StyledButton>\n        <StyledButton inline color=\"teal\" /*onClick={onPublish}*/>\n          {edit ? '수정하기' : '출간하기'}\n        </StyledButton>\n      </Group>\n    </WriteFooterBlock>\n  );\n};\n\nexport default WriteFooter;\n","import visit from 'unist-util-visit';\n\n// const regex = /!(youtube|twitter|codesandbox)\\[(.*?)\\]/;\n\nconst embedTypeRegex = /^!(youtube|twitter|codesandbox|codepen)$/;\nconst converters = {\n  youtube: (code: string) =>\n    `<iframe class=\"embed\" src=\"https://www.youtube.com/embed/${code}\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>`,\n  twitter: (code: string) =>\n    `<blockquote class=\"twitter-wrapper\"><blockquote class=\"twitter-tweet\" data-lang=\"ko\"><a href=\"https://twitter.com/${code}\"></a></blockquote></blockquote>`,\n  codesandbox: (code: string) =>\n    `<iframe class=\"embed\" src=\"https://codesandbox.io/embed/${code}\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"></iframe>`,\n  codepen: (code: string) =>\n    `<iframe class=\"embed\" scrolling=\"no\" title=\"Tab Menu Layout2\" src=\"https://codepen.io/${code}\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\"></iframe>`,\n};\n\ntype ConverterKey = keyof typeof converters;\n\nexport default function embedPlugin() {\n  function transformer(tree: any, file: any) {\n    function visitor(node: any) {\n      try {\n        const { children }: { children: any[] } = node;\n        if (children.length < 2) return;\n        const index = children.findIndex(childNode => {\n          if (!childNode.value) return false;\n          return childNode.value.match(embedTypeRegex);\n        });\n        if (index === -1) return;\n        const childNode = children[index];\n        const siblingNode = children[index + 1];\n        if (!siblingNode || siblingNode.type !== 'linkReference') return;\n        const { label } = siblingNode;\n        const match = embedTypeRegex.exec(children[index].value);\n        if (!match) return;\n        const type = match[1] as ConverterKey;\n\n        childNode.type = 'html';\n        childNode.value = converters[type](label);\n        children.splice(index + 1, 1);\n      } catch (e) {\n        console.log(e);\n      }\n    }\n\n    visit(tree, 'paragraph', visitor);\n  }\n\n  return transformer;\n}\n","import React, { useMemo, useState } from 'react';\nimport MarkdownEditor from '../../components/write/WriteMarkdownEditor';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { RootState } from '../../modules';\nimport {\n  changeMarkdown,\n  changeTitle,\n  setHtml,\n  convertEditorMode,\n  openPublish,\n  setDefaultDescription,\n  setThumbnail,\n  setWritePostId,\n  setInitialBody,\n} from '../../modules/write';\n\nimport remark from 'remark';\nimport htmlPlugin from 'remark-html';\nimport breaks from 'remark-breaks';\nimport strip from 'strip-markdown';\nimport TagInputContainer from './TagInputContainer';\nimport WriteFooter from '../../components/write/WriteFooter';\n// import useUpload from '../../lib/hooks/useUpload';\n// import useS3Upload from '../../lib/hooks/useS3Upload';\n// import DragDropUpload from '../../components/common/DragDropUpload';\n// import PasteUpload from '../../components/common/PasteUpload';\nimport { bindActionCreators } from 'redux';\n// import { useMutation } from '@apollo/react-hooks';\n// import {\n//   WritePostResponse,\n//   WRITE_POST,\n//   CreatePostHistoryResponse,\n//   CREATE_POST_HISTORY,\n//   EditPostResult,\n//   EDIT_POST,\n// } from '../../lib/graphql/post';\nimport { escapeForUrl } from '../../lib/utils';\n// import { useHistory } from 'react-router';\nimport useSaveHotKey from './hooks/useSaveHotkey';\nimport embedPlugin from '../../lib/remark/embedPlugin';\nimport { Helmet } from 'react-helmet-async';\nimport { toast } from 'react-toastify';\n// import { usePrevious } from 'react-use';\n\nexport type MarkdownEditorContainerProps = {};\n\nconst { useCallback, useEffect } = React;\n\nconst MarkdownEditorContainer: React.FC<MarkdownEditorContainerProps> = () => {\n  // const history = useHistory();\n  const {\n    title,\n    markdown,\n    thumbnail,\n    postId,\n    isTemp,\n    initialBody,\n    initialTitle,\n    tags,\n  } = useSelector((state: RootState) => state.write);\n  // const [writePost] = useMutation<WritePostResponse>(WRITE_POST);\n  // const [createPostHistory] = useMutation<CreatePostHistoryResponse>(\n  //   CREATE_POST_HISTORY,\n  // );\n  // const [editPost] = useMutation<EditPostResult>(EDIT_POST);\n\n  const [lastSavedData, setLastSavedData] = useState({\n    title: initialTitle,\n    body: initialBody,\n  });\n\n  const onGoBack = () => {\n    // history.goBack();\n  };\n\n  useEffect(() => {\n    setLastSavedData({\n      title: initialTitle,\n      body: initialBody,\n    });\n  }, [initialTitle, initialBody]);\n\n  const dispatch = useDispatch();\n  const actionCreators = useMemo(\n    () =>\n      bindActionCreators(\n        {\n          changeMarkdown,\n          changeTitle,\n          setHtml,\n          convertEditorMode,\n          openPublish,\n          setDefaultDescription,\n          setThumbnail,\n          setInitialBody,\n        },\n        dispatch,\n      ),\n    [dispatch],\n  );\n\n  const onConvert = (markdown: string) => {\n    remark()\n      .use(breaks)\n      .use(htmlPlugin)\n      .use(embedPlugin)\n      .process(markdown, (err: any, file: any) => {\n        const html = String(file);\n        console.log(html);\n        actionCreators.setHtml(html);\n        actionCreators.setInitialBody(html);\n        actionCreators.convertEditorMode();\n      });\n  };\n\n  const onPublish = useCallback(() => {\n    // (/#(.*?)\\n/g, '').replace(/\\n/g, '')\n    remark()\n      .use(strip)\n      .process(markdown.replace(/#(.*?)\\n/g, ''), (err: any, file: any) => {\n        const text = String(file);\n        const sliced = text.replace(/\\n/g, '').slice(0, 150);\n        actionCreators.setDefaultDescription(sliced);\n        actionCreators.openPublish();\n      });\n  }, [actionCreators, markdown]);\n\n  // const [upload, file] = useUpload();\n  // const [s3Upload, image] = useS3Upload();\n  // const prevImage = usePrevious(image);\n\n  // useEffect(() => {\n  //   if (!file) return;\n  //   s3Upload(file, {\n  //     type: 'post',\n  //   });\n  // }, [file, s3Upload]);\n\n  // useEffect(() => {\n  //   if (image !== prevImage && !thumbnail && image) {\n  //     actionCreators.setThumbnail(image);\n  //   }\n  // }, [actionCreators, image, prevImage, thumbnail]);\n\n  // const onDragDropUpload = useCallback(\n  //   (file: File) => {\n  //     s3Upload(file, {\n  //       type: 'post',\n  //     });\n  //   },\n  //   [s3Upload],\n  // );\n\n  // const onTempSave = useCallback(\n  //   async (notify?: boolean) => {\n  //     if (!title || !markdown) {\n  //       toast.error('제목 또는 내용이 비어있습니다.');\n  //       return;\n  //     }\n\n  //     const notifySuccess = () => {\n  //       if (!notify) return;\n  //       toast.success('포스트가 임시저장되었습니다.');\n  //     };\n\n  //     if (!postId) {\n  //       const response = await writePost({\n  //         variables: {\n  //           title,\n  //           body: markdown,\n  //           tags,\n  //           is_markdown: true,\n  //           is_temp: true,\n  //           is_private: false,\n  //           url_slug: escapeForUrl(title),\n  //           thumbnail: null,\n  //           meta: {},\n  //           series_id: null,\n  //         },\n  //       });\n  //       if (!response || !response.data) return;\n  //       const { id } = response.data.writePost;\n  //       dispatch(setWritePostId(id));\n  //       history.replace(`/write?id=${id}`);\n  //       notifySuccess();\n  //       return;\n  //     }\n  //     // tempsaving unreleased post:\n  //     if (isTemp) {\n  //       await editPost({\n  //         variables: {\n  //           id: postId,\n  //           title,\n  //           body: markdown,\n  //           is_markdown: true,\n  //           is_temp: true,\n  //           is_private: false,\n  //           url_slug: escapeForUrl(title),\n  //           thumbnail: null,\n  //           meta: {},\n  //           series_id: null,\n  //           tags,\n  //         },\n  //       });\n  //       notifySuccess();\n  //       return;\n  //     }\n\n  //     // tempsaving released post:\n  //     // save only if something has been changed\n  //     if (shallowEqual(lastSavedData, { title, body: markdown })) {\n  //       return;\n  //     }\n  //     // await createPostHistory({\n  //     //   variables: {\n  //     //     post_id: postId,\n  //     //     title,\n  //     //     body: markdown,\n  //     //     is_markdown: true,\n  //     //   },\n  //     // });\n  //     // setLastSavedData({\n  //     //   title,\n  //     //   body: markdown,\n  //     // });\n  //     // notifySuccess();\n  //   },\n  //   [\n  //     createPostHistory,\n  //     dispatch,\n  //     editPost,\n  //     history,\n  //     isTemp,\n  //     lastSavedData,\n  //     markdown,\n  //     postId,\n  //     tags,\n  //     title,\n  //     writePost,\n  //   ],\n  // );\n\n  // useEffect(() => {\n  //   const changed = !shallowEqual(lastSavedData, { title, body: markdown });\n  //   if (changed) {\n  //     const timeoutId = setTimeout(() => {\n  //       if (!postId && !title && markdown.length < 30) return;\n  //       onTempSave(true);\n  //     }, 10 * 1000);\n\n  //     return () => {\n  //       clearTimeout(timeoutId);\n  //     };\n  //   }\n  // }, [title, postId, onTempSave, lastSavedData, markdown]);\n\n  // useSaveHotKey(() => onTempSave(true));\n\n  return (\n    <>\n      <Helmet>\n        <title>{title ? `(작성중) ${title}` : '새 글 작성'}</title>\n      </Helmet>\n      <MarkdownEditor\n        // onUpload={upload}\n        // lastUploadedImage={image}\n        initialBody={initialBody}\n        title={title}\n        markdown={markdown}\n        onChangeMarkdown={actionCreators.changeMarkdown}\n        onChangeTitle={actionCreators.changeTitle}\n        onConvert={onConvert}\n        tagInput={<TagInputContainer />}\n        footer={\n          <WriteFooter\n            // onPublish={onPublish}\n            // onTempSave={onTempSave}\n            onGoBack={onGoBack}\n            edit={!!postId && !isTemp}\n          />\n        }\n      />\n      {/* <DragDropUpload onUpload={onDragDropUpload} /> */}\n      {/* <PasteUpload onUpload={onDragDropUpload} /> */}\n    </>\n  );\n};\n\nexport default MarkdownEditorContainer;\n","/* eslint-disable */\nimport visit from 'unist-util-visit';\nimport Prism from 'prismjs';\n\nimport 'prismjs/components/prism-bash.min';\nimport 'prismjs/components/prism-typescript.min';\nimport 'prismjs/components/prism-javascript.min';\nimport 'prismjs/components/prism-markup-templating.min';\nimport 'prismjs/components/prism-jsx.min';\nimport 'prismjs/components/prism-css.min';\nimport 'prismjs/components/prism-python.min';\nimport 'prismjs/components/prism-go.min';\nimport 'prismjs/components/prism-scss.min';\nimport 'prismjs/components/prism-java.min';\nimport 'prismjs/components/prism-c.min';\nimport 'prismjs/components/prism-cpp.min';\nimport 'prismjs/components/prism-csharp.min';\nimport 'prismjs/components/prism-graphql.min';\nimport 'prismjs/components/prism-tsx.min';\nimport 'prismjs/components/prism-php.min';\nimport 'prismjs/components/prism-aspnet.min';\nimport 'prismjs/components/prism-sql.min';\nimport 'prismjs/components/prism-swift.min';\nimport 'prismjs/components/prism-kotlin.min';\nimport 'prismjs/components/prism-erlang.min';\nimport 'prismjs/components/prism-elixir.min';\nimport 'prismjs/components/prism-ruby.min';\nimport 'prismjs/components/prism-rust.min';\nimport 'prismjs/components/prism-yaml.min';\nimport 'prismjs/components/prism-dart';\n\nimport { ssrEnabled } from '../utils';\n\nexport default function attacher({ include, exclude } = {}) {\n  function visitor(node) {\n    let { lang, data } = node;\n\n    // if (\n    //   !lang ||\n    //   (include && include.indexOf(lang) === -1) ||\n    //   (exclude && exclude.indexOf(lang) !== -1)\n    // ) {\n    //   return;\n    // }\n\n    if (!data) {\n      data = {};\n      node.data = data;\n    }\n\n    if (!data.hProperties) {\n      data.hProperties = {};\n    }\n\n    if (!ssrEnabled) {\n      window.prism = Prism;\n    }\n\n    const highlighted = Prism.highlight(\n      node.value,\n      Prism.languages[lang] || Prism.languages.markup,\n    );\n\n    node.type = 'html';\n    node.value = `<pre><code class=\"language-${lang}\">${highlighted}</code></pre>`;\n    // console.log(data);\n    // data.hChildren = '<div>so what?</div>';\n    // data.hChildren =\n    // data.hChildren = low.highlight(lang, node.value).value;\n    // data.hProperties.className = [\n    //   'hljs',\n    //   ...(data.hProperties.className || []),\n    //   'language-' + lang,\n    // ];\n  }\n  return ast => visit(ast, 'code', visitor);\n}\n","import { css } from 'styled-components';\n\nconst prismThemes = {\n  'atom-one-dark': css`\n    pre {\n      background: #313440;\n    }\n    /**\n * prism.js default theme for JavaScript, CSS and HTML\n * Based on dabblet (http://dabblet.com)\n * @author Lea Verou\n */\n    code[class*='language-'],\n    pre[class*='language-'] {\n      color: #e0e6f1;\n      background: none;\n      text-align: left;\n      white-space: pre;\n      word-spacing: normal;\n      word-break: normal;\n      word-wrap: normal;\n\n      -moz-tab-size: 4;\n      -o-tab-size: 4;\n      tab-size: 4;\n      -webkit-hyphens: none;\n      -moz-hyphens: none;\n      -ms-hyphens: none;\n      hyphens: none;\n    }\n\n    pre[class*='language-']::-moz-selection,\n    pre[class*='language-'] ::-moz-selection,\n    code[class*='language-']::-moz-selection,\n    code[class*='language-'] ::-moz-selection {\n      text-shadow: none;\n      background: #383e49;\n    }\n\n    pre[class*='language-']::selection,\n    pre[class*='language-'] ::selection,\n    code[class*='language-']::selection,\n    code[class*='language-'] ::selection {\n      text-shadow: none;\n      background: #9aa2b1;\n    }\n\n    @media print {\n      code[class*='language-'],\n      pre[class*='language-'] {\n        text-shadow: none;\n      }\n    }\n    /* Code blocks */\n    pre[class*='language-'] {\n      padding: 1em;\n      margin: 0.5em 0;\n      overflow: auto;\n    }\n\n    :not(pre) > code[class*='language-'],\n    pre[class*='language-'] {\n      background: #282c34;\n    }\n\n    /* Inline code */\n    :not(pre) > code[class*='language-'] {\n      padding: 0.1em;\n      border-radius: 0.3em;\n      white-space: normal;\n    }\n\n    .token.comment,\n    .token.prolog,\n    .token.doctype,\n    .token.cdata {\n      color: #5c6370;\n    }\n\n    .token.punctuation {\n      color: #abb2bf;\n    }\n\n    .token.selector,\n    .token.tag {\n      color: #e06c75;\n    }\n\n    .token.property,\n    .token.boolean,\n    .token.number,\n    .token.constant,\n    .token.symbol,\n    .token.attr-name,\n    .token.deleted {\n      color: #d19a66;\n    }\n\n    .token.string,\n    .token.char,\n    .token.attr-value,\n    .token.builtin,\n    .token.inserted {\n      color: #98c379;\n    }\n\n    .token.operator,\n    .token.entity,\n    .token.url,\n    .language-css .token.string,\n    .style .token.string {\n      color: #56b6c2;\n    }\n\n    .token.atrule,\n    .token.keyword {\n      color: #c678dd;\n    }\n\n    .token.function {\n      color: #61afef;\n    }\n\n    .token.regex,\n    .token.important,\n    .token.variable {\n      color: #c678dd;\n    }\n\n    .token.important,\n    .token.bold {\n      font-weight: bold;\n    }\n\n    .token.italic {\n      font-style: italic;\n    }\n\n    .token.entity {\n      cursor: help;\n    }\n\n    pre.line-numbers {\n      position: relative;\n      padding-left: 3.8em;\n      counter-reset: linenumber;\n    }\n\n    pre.line-numbers > code {\n      position: relative;\n    }\n\n    .line-numbers .line-numbers-rows {\n      position: absolute;\n      pointer-events: none;\n      top: 0;\n      font-size: 100%;\n      left: -3.8em;\n      width: 3em; /* works for line-numbers below 1000 lines */\n      letter-spacing: -1px;\n      border-right: 0;\n\n      -webkit-user-select: none;\n      -moz-user-select: none;\n      -ms-user-select: none;\n      user-select: none;\n    }\n\n    .line-numbers-rows > span {\n      pointer-events: none;\n      display: block;\n      counter-increment: linenumber;\n    }\n\n    .line-numbers-rows > span:before {\n      content: counter(linenumber);\n      color: #5c6370;\n      display: block;\n      padding-right: 0.8em;\n      text-align: right;\n    }\n  `,\n  'atom-one-light': css`\n    code,\n    code[class*='language-'],\n    pre[class*='language-'] {\n      color: #24292e;\n    }\n    pre {\n      box-shadow: 0px 0px 2px #00000005;\n      background: #fbfcfd;\n      color: #24292e;\n      /* background: white; */\n    }\n    .token.builtin {\n      color: #0184bc;\n    }\n    .token.function {\n      color: #005cc5;\n    }\n    .token.comment,\n    .token.prolog,\n    .token.doctype,\n    .token.cdata {\n      color: #969896;\n    }\n    .token.punctuation {\n      color: #24292e;\n    }\n    .token.atrule,\n    .token.attr-value {\n      color: #183691;\n    }\n    .token.property,\n    .token.tag {\n      color: #63a35c;\n    }\n    .token.boolean,\n    .token.number {\n      color: #986801;\n    }\n    .token.selector,\n    .token.attr-name,\n    .token.attr-value .punctuation:first-child,\n    .token.keyword,\n    .token.regex,\n    .token.important {\n      color: #a626a4;\n    }\n    .token.operator {\n      color: #0184bc;\n    }\n    .token.entity,\n    .token.url,\n    .language-css,\n    .token.string {\n      color: #50a14f;\n    }\n    .token.entity {\n      cursor: help;\n    }\n    .namespace {\n      opacity: 0.7;\n    }\n  `,\n  github: css`\n    /**\n   * Github-like theme for Prism.js\n   * @author Luke Askew http://github.com/lukeaskew\n   */\n    code,\n    code[class*='language-'],\n    pre[class*='language-'] {\n      color: #24292e;\n    }\n    pre {\n      color: #24292e;\n      background: #f6f8fa;\n    }\n    .token.function {\n      color: #005cc5;\n    }\n    .token.comment,\n    .token.prolog,\n    .token.doctype,\n    .token.cdata {\n      color: #969896;\n    }\n    .token.punctuation {\n      color: #24292e;\n    }\n    .token.string {\n      color: #032f62;\n    }\n    .token.atrule,\n    .token.attr-value {\n      color: #183691;\n    }\n    .token.property,\n    .token.tag {\n      color: #63a35c;\n    }\n    .token.boolean,\n    .token.number {\n      color: #0086b3;\n    }\n    .token.selector,\n    .token.attr-name,\n    .token.attr-value .punctuation:first-child,\n    .token.keyword,\n    .token.regex,\n    .token.important {\n      color: #d73a49;\n    }\n    .token.operator,\n    .token.entity,\n    .token.url,\n    .language-css {\n      color: #d73a49;\n    }\n    .token.entity {\n      cursor: help;\n    }\n    .namespace {\n      opacity: 0.7;\n    }\n  `,\n  monokai: css`\n    /**\n * Monokai theme for Prism.JS\n *\n * @author Martijn Swaagman\n * @license MIT 2015\n */\n\n    code[class*='language-'],\n    pre[class*='language-'] {\n      color: #f8f8f2;\n      text-shadow: 0 1px rgba(0, 0, 0, 0.3);\n    }\n\n    :not(pre) > code[class*='language-'],\n    pre[class*='language-'] {\n      background: #272822;\n    }\n\n    pre {\n      color: #f8f8f2;\n      text-shadow: 0 1px rgba(0, 0, 0, 0.3);\n      background: #272822;\n    }\n\n    .token.comment,\n    .token.prolog,\n    .token.doctype,\n    .token.cdata {\n      color: #778090;\n    }\n\n    .token.punctuation {\n      color: #f8f8f2;\n    }\n\n    .namespace {\n      opacity: 0.7;\n    }\n\n    .token.property,\n    .token.tag,\n    .token.constant,\n    .token.symbol,\n    .token.deleted {\n      color: #f92672;\n    }\n\n    .token.boolean,\n    .token.number {\n      color: #ae81ff;\n    }\n\n    .token.selector,\n    .token.attr-name,\n    .token.string,\n    .token.char,\n    .token.builtin,\n    .token.inserted {\n      color: #a6e22e;\n    }\n\n    .token.operator,\n    .token.entity,\n    .token.url,\n    .language-css .token.string,\n    .style .token.string,\n    .token.variable {\n      color: #f8f8f2;\n    }\n\n    .token.atrule,\n    .token.attr-value,\n    .token.function {\n      color: #e6db74;\n    }\n\n    .token.keyword {\n      color: #f92672;\n    }\n\n    .token.regex,\n    .token.important {\n      color: #fd971f;\n    }\n\n    .token.important,\n    .token.bold {\n      font-weight: bold;\n    }\n\n    .token.italic {\n      font-style: italic;\n    }\n\n    .token.entity {\n      cursor: help;\n    }\n  `,\n  dracula: css`\n    /* PrismJS 1.14.0\nhttp://prismjs.com/download.html#themes=prism&languages=markup+css+clike+javascript+abap+actionscript+ada+apacheconf+apl+applescript+c+arff+asciidoc+asm6502+aspnet+autohotkey+autoit+bash+basic+batch+bison+brainfuck+bro+cpp+csharp+arduino+coffeescript+clojure+ruby+csp+css-extras+d+dart+diff+django+docker+eiffel+elixir+elm+markup-templating+erlang+fsharp+flow+fortran+gedcom+gherkin+git+glsl+go+graphql+groovy+haml+handlebars+haskell+haxe+http+hpkp+hsts+ichigojam+icon+inform7+ini+io+j+java+jolie+json+julia+keyman+kotlin+latex+less+liquid+lisp+livescript+lolcode+lua+makefile+markdown+erb+matlab+mel+mizar+monkey+n4js+nasm+nginx+nim+nix+nsis+objectivec+ocaml+opencl+oz+parigp+parser+pascal+perl+php+php-extras+sql+powershell+processing+prolog+properties+protobuf+pug+puppet+pure+python+q+qore+r+jsx+typescript+renpy+reason+rest+rip+roboconf+crystal+rust+sas+sass+scss+scala+scheme+smalltalk+smarty+plsql+soy+stylus+swift+tcl+textile+twig+tsx+vbnet+velocity+verilog+vhdl+vim+visual-basic+wasm+wiki+xeora+xojo+yaml&plugins=line-numbers+toolbar+show-language */\n\n    /**\n * prism.js default theme for JavaScript, CSS and HTML\n * Based on dabblet (http://dabblet.com)\n * @author Lea Verou\n */\n\n    /*\n* Dracula Theme for Prism.JS\n*\n* @author Gustavo Costa\n* e-mail: gusbemacbe@gmail.com\n*\n* @contributor Jon Leopard\n* e-mail: jonlprd@gmail.com\n*\n* @license MIT 2016-2018\n*/\n\n    code[class*='language-'],\n    pre[class*='language-'] {\n      color: #ccc;\n      background: rgb(40, 41, 54);\n    }\n\n    pre[class*='language-']::-moz-selection,\n    pre[class*='language-'] ::-moz-selection,\n    code[class*='language-']::-moz-selection,\n    code[class*='language-'] ::-moz-selection {\n      text-shadow: none;\n      background-color: #5a5f80;\n    }\n\n    pre[class*='language-']::selection,\n    pre[class*='language-'] ::selection,\n    code[class*='language-']::selection,\n    code[class*='language-'] ::selection {\n      text-shadow: none;\n      background-color: #5a5f80;\n    }\n\n    /* Inline code */\n\n    :not(pre) > code[class*='language-'] {\n      border-radius: 0.3em;\n      white-space: normal;\n    }\n\n    pre {\n      color: #ccc;\n      background: rgb(40, 41, 54);\n    }\n\n    .limit-300 {\n      height: 300px !important;\n    }\n\n    .limit-400 {\n      height: 400px !important;\n    }\n\n    .limit-500 {\n      height: 500px !important;\n    }\n\n    .limit-600 {\n      height: 600px !important;\n    }\n\n    .limit-700 {\n      height: 700px !important;\n    }\n\n    .limit-800 {\n      height: 800px !important;\n    }\n\n    .token.comment {\n      color: rgba(98, 114, 164, 1);\n    }\n\n    .token.prolog {\n      color: rgba(207, 207, 194, 1);\n    }\n\n    .token.tag {\n      color: rgba(220, 104, 170, 1);\n    }\n\n    .token.entity {\n      color: rgba(139, 233, 253, 1);\n    }\n\n    .token.atrule {\n      color: rgba(98, 239, 117, 1);\n    }\n\n    .token.url {\n      color: rgba(102, 217, 239, 1);\n    }\n\n    .token.selector {\n      color: rgba(207, 207, 194, 1);\n    }\n\n    .token.string {\n      color: rgba(241, 250, 140, 1);\n    }\n\n    .token.property {\n      color: rgba(255, 184, 108, 1);\n    }\n\n    .token.important {\n      color: rgba(255, 121, 198, 1);\n      font-weight: bold;\n    }\n\n    .token.punctuation {\n      color: rgba(230, 219, 116, 1);\n    }\n\n    .token.number {\n      color: rgba(189, 147, 249, 1);\n    }\n\n    .token.function {\n      color: rgba(80, 250, 123, 1);\n    }\n\n    .token.class-name {\n      color: rgba(255, 184, 108, 1);\n    }\n\n    .token.keyword {\n      color: rgba(255, 121, 198, 1);\n    }\n\n    .token.boolean {\n      color: rgba(255, 184, 108, 1);\n    }\n\n    .token.operator {\n      color: rgba(139, 233, 253, 1);\n    }\n\n    .token.char {\n      color: rgba(255, 135, 157, 1);\n    }\n\n    .token.regex {\n      color: rgba(80, 250, 123, 1);\n    }\n\n    .token.variable {\n      color: rgba(80, 250, 123, 1);\n    }\n\n    .token.constant {\n      color: rgba(255, 184, 108, 1);\n    }\n\n    .token.symbol {\n      color: rgba(255, 184, 108, 1);\n    }\n\n    .token.builtin {\n      color: rgba(255, 121, 198, 1);\n    }\n\n    .token.attr-value {\n      color: #7ec699;\n    }\n\n    .token.deleted {\n      color: #e2777a;\n    }\n\n    .token.namespace {\n      color: #e2777a;\n    }\n\n    .token.bold {\n      font-weight: bold;\n    }\n\n    .token.italic {\n      font-style: italic;\n    }\n\n    .token {\n      color: #ff79c6;\n    }\n\n    .langague-cpp .token.string {\n      color: #8be9fd;\n    }\n\n    .langague-c .token.string {\n      color: #8be9fd;\n    }\n\n    .language-css .token.selector {\n      color: rgba(80, 250, 123, 1);\n    }\n\n    .language-css .token.property {\n      color: rgba(255, 184, 108, 1);\n    }\n\n    .language-java span.token.class-name {\n      color: #8be9fd;\n    }\n\n    .language-java .token.class-name {\n      color: #8be9fd;\n    }\n\n    .language-markup .token.attr-value {\n      color: rgba(102, 217, 239, 1);\n    }\n\n    .language-markup .token.tag {\n      color: rgba(80, 250, 123, 1);\n    }\n\n    .language-objectivec .token.property {\n      color: #66d9ef;\n    }\n\n    .language-objectivec .token.string {\n      color: #50fa7b;\n    }\n\n    .language-php .token.boolean {\n      color: #8be9fd;\n    }\n\n    .language-php .token.function {\n      color: #ff79c6;\n    }\n\n    .language-php .token.keyword {\n      color: #66d9ef;\n    }\n\n    .language-ruby .token.symbol {\n      color: #8be9fd;\n    }\n\n    .language-ruby .token.class-name {\n      color: #cfcfc2;\n    }\n\n    pre.line-numbers {\n      position: relative;\n      padding-left: 3.8em;\n      counter-reset: linenumber;\n    }\n\n    pre.line-numbers > code {\n      position: relative;\n      white-space: inherit;\n    }\n\n    .line-numbers .line-numbers-rows {\n      position: absolute;\n      pointer-events: none;\n      top: 0;\n      font-size: 100%;\n      left: -3.8em;\n      width: 3em;\n      /* works for line-numbers below 1000 lines */\n      letter-spacing: -1px;\n      border-right: 1px solid #999;\n      -webkit-user-select: none;\n      -moz-user-select: none;\n      -ms-user-select: none;\n      user-select: none;\n    }\n\n    .line-numbers-rows > span {\n      pointer-events: none;\n      display: block;\n      counter-increment: linenumber;\n    }\n\n    .line-numbers-rows > span:before {\n      content: counter(linenumber);\n      color: #999;\n      display: block;\n      padding-right: 0.8em;\n      text-align: right;\n    }\n\n    div.code-toolbar {\n      position: relative;\n    }\n\n    div.code-toolbar > .toolbar {\n      position: absolute;\n      top: 0.3em;\n      right: 0.2em;\n      transition: opacity 0.3s ease-in-out;\n      opacity: 0;\n    }\n\n    div.code-toolbar:hover > .toolbar {\n      opacity: 1;\n    }\n\n    div.code-toolbar > .toolbar .toolbar-item {\n      display: inline-block;\n      padding-right: 20px;\n    }\n\n    div.code-toolbar > .toolbar a {\n      cursor: pointer;\n    }\n\n    div.code-toolbar > .toolbar button {\n      background: none;\n      border: 0;\n      color: inherit;\n      font: inherit;\n      line-height: normal;\n      overflow: visible;\n      padding: 0;\n      -webkit-user-select: none;\n      /* for button */\n      -moz-user-select: none;\n      -ms-user-select: none;\n    }\n\n    div.code-toolbar > .toolbar a,\n    div.code-toolbar > .toolbar button,\n    div.code-toolbar > .toolbar span {\n      color: #ccc;\n      font-size: 0.8em;\n      padding: 0.5em;\n      background: rgba(98, 114, 164, 1);\n      border-radius: 0.5em;\n    }\n\n    div.code-toolbar > .toolbar a:hover,\n    div.code-toolbar > .toolbar a:focus,\n    div.code-toolbar > .toolbar button:hover,\n    div.code-toolbar > .toolbar button:focus,\n    div.code-toolbar > .toolbar span:hover,\n    div.code-toolbar > .toolbar span:focus {\n      color: inherit;\n      text-decoration: none;\n      background-color: var(--verde);\n    }\n  `,\n  //   'duotone-light': css`\n  //     /*\n  // Name:   Duotone Light\n  // Author: Simurai, adapted from DuoTone themes for Atom (http://simurai.com/projects/2016/01/01/duotone-themes)\n  // Conversion: Bram de Haan (http://atelierbram.github.io/Base2Tone-prism/output/prism/prism-base2tone-morning-light.css)\n  // Generated with Base16 Builder (https://github.com/base16-builder/base16-builder)\n  // */\n\n  //     code[class*='language-'],\n  //     pre[class*='language-'] {\n  //       background: #faf8f5;\n  //       color: #728fcb;\n  //     }\n\n  //     pre[class*='language-']::-moz-selection,\n  //     pre[class*='language-'] ::-moz-selection,\n  //     code[class*='language-']::-moz-selection,\n  //     code[class*='language-'] ::-moz-selection {\n  //       text-shadow: none;\n  //       background: #faf8f5;\n  //     }\n\n  //     pre[class*='language-']::selection,\n  //     pre[class*='language-'] ::selection,\n  //     code[class*='language-']::selection,\n  //     code[class*='language-'] ::selection {\n  //       text-shadow: none;\n  //       background: #faf8f5;\n  //     }\n\n  //     pre {\n  //       background: #faf8f5;\n  //       color: #728fcb;\n  //     }\n\n  //     .token.comment,\n  //     .token.prolog,\n  //     .token.doctype,\n  //     .token.cdata {\n  //       color: #b6ad9a;\n  //     }\n\n  //     .token.punctuation {\n  //       color: #b6ad9a;\n  //     }\n\n  //     .token.namespace {\n  //       opacity: 0.7;\n  //     }\n\n  //     .token.tag,\n  //     .token.operator,\n  //     .token.number {\n  //       color: #063289;\n  //     }\n\n  //     .token.property,\n  //     .token.function {\n  //       color: #b29762;\n  //     }\n\n  //     .token.tag-id,\n  //     .token.selector,\n  //     .token.atrule-id {\n  //       color: #2d2006;\n  //     }\n\n  //     code.language-javascript,\n  //     .token.attr-name {\n  //       color: #896724;\n  //     }\n\n  //     code.language-css,\n  //     code.language-scss,\n  //     .token.boolean,\n  //     .token.string,\n  //     .token.entity,\n  //     .token.url,\n  //     .language-css .token.string,\n  //     .language-scss .token.string,\n  //     .style .token.string,\n  //     .token.attr-value,\n  //     .token.keyword,\n  //     .token.control,\n  //     .token.directive,\n  //     .token.unit,\n  //     .token.statement,\n  //     .token.regex,\n  //     .token.atrule {\n  //       color: #728fcb;\n  //     }\n\n  //     .token.placeholder,\n  //     .token.variable {\n  //       color: #93abdc;\n  //     }\n\n  //     .token.deleted {\n  //       text-decoration: line-through;\n  //     }\n\n  //     .token.inserted {\n  //       border-bottom: 1px dotted #2d2006;\n  //       text-decoration: none;\n  //     }\n\n  //     .token.italic {\n  //       font-style: italic;\n  //     }\n\n  //     .token.important,\n  //     .token.bold {\n  //       font-weight: bold;\n  //     }\n\n  //     .token.important {\n  //       color: #896724;\n  //     }\n\n  //     .token.entity {\n  //       cursor: help;\n  //     }\n\n  //     pre > code.highlight {\n  //       outline: 0.4em solid #896724;\n  //       outline-offset: 0.4em;\n  //     }\n\n  //     /* overrides color-values for the Line Numbers plugin\n  //  * http://prismjs.com/plugins/line-numbers/\n  //  */\n\n  //     .line-numbers .line-numbers-rows {\n  //       border-right-color: #ece8de;\n  //     }\n\n  //     .line-numbers-rows > span:before {\n  //       color: #cdc4b1;\n  //     }\n\n  //     /* overrides color-values for the Line Highlight plugin\n  //  * http://prismjs.com/plugins/line-highlight/\n  //  */\n\n  //     .line-highlight {\n  //       background: rgba(45, 32, 6, 0.2);\n  //       background: -webkit-linear-gradient(\n  //         left,\n  //         rgba(45, 32, 6, 0.2) 70%,\n  //         rgba(45, 32, 6, 0)\n  //       );\n  //       background: linear-gradient(\n  //         to right,\n  //         rgba(45, 32, 6, 0.2) 70%,\n  //         rgba(45, 32, 6, 0)\n  //       );\n  //     }\n  //   `,\n};\n\nexport default prismThemes;\n","import * as React from 'react';\nimport styled from 'styled-components';\nimport palette from '../../lib/styles/palette';\nimport media from '../../lib/styles/media';\n\nconst TypographyBlock = styled.div`\n  font-size: 1.125rem;\n  color: #222426;\n  line-height: 1.7;\n  letter-spacing: -0.004em;\n  word-break: keep-all;\n  word-wrap: break-word;\n  ul, ol, p {\n    /* ${media.xxlarge} {\n      color: ${palette.gray8};\n      font-weight: 300;\n    } */\n\n    b {\n      font-weight: 400;\n    }\n    code {\n      background: rgba(27,31,35,.05);\n      padding: .2em .4em;\n      font-size: 85%;\n      border-radius: 3px;\n    }\n    a {\n      code {\n        color: ${palette.teal6};\n      }\n    }\n  }\n  /* font-family: 'Spoqa Han Sans', -apple-system, BlinkMacSystemFont,\n    -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'Apple SD Gothic Neo',\n    arial, 나눔고딕, 'Nanum Gothic', 돋움; */\n\n  a {\n    color: ${palette.teal7};\n    text-decoration: none;\n    &:hover {\n      color: ${palette.teal6};\n      text-decoration: underline;\n    }\n  }\n  code {\n    font-family: 'Fira Mono', source-code-pro, Menlo, Monaco, Consolas,\n      'Courier New', monospace;\n  }\n\n  hr {\n    border: none;\n    height: 1px;\n    width: 100%;\n    background: #dedede;\n    margin-top: 2rem;\n    margin-bottom: 2rem;\n  }\n\n  p {\n    img {\n      display: block;\n      margin: 0 auto;\n      max-width: 100%;\n      margin-top: 3rem;\n      margin-bottom: 3rem;\n    }\n  }\n\n  h1 {\n    font-size: 2.5rem;\n  }\n  h2 {\n    font-size: 2rem;\n  }\n  h3 {\n    font-size: 1.5rem;\n  }\n  h4 {\n    font-size: 1.125rem;\n  }\n\n  h1,\n  h2,\n  h3,\n  h4 {\n    line-height: 1.5;\n    margin-bottom: 1rem;\n  }\n  p + h1,\n  p + h2,\n  p + h3,\n  p + h4 {\n    margin-top: 2.5rem;\n  }\n\n  ${media.small} {\n    font-size: 1rem;\n    h1 {\n      font-size: 2.25rem;\n    }\n    h2 {\n      font-size: 1.75rem;\n    }\n    h3 {\n      font-size: 1.25rem;\n    }\n    h4 {\n      font-size: 1rem;\n    }\n\n    h1,\n    h2,\n    h3,\n    h4 {\n      margin-bottom: 0.75rem;\n    }\n    p + h1,\n    p + h2,\n    p + h3,\n    p + h4 {\n      margin-top: 2rem;\n    }\n  }\n\n  blockquote {\n    margin-top: 2rem;\n    margin-bottom: 2rem;\n    border-left: 4px solid ${palette.teal5};\n    border-top-right-radius: 4px;\n    border-bottom-right-radius: 4px;\n    background: ${palette.gray0};\n    margin-left: 0;\n    margin-right: 0;\n    padding: 1rem;\n    padding-left: 2rem;\n    color: ${palette.gray9};\n    ul, ol {\n      padding-left: 1rem;\n    }\n    *:first-child {\n      margin-top: 0;\n    }\n    *:last-child {\n      margin-bottom: 0;\n    }\n  }\n`;\n\nexport interface TypographyProps {}\n\nconst Typography: React.FC<TypographyProps> = ({ children }) => {\n  return <TypographyBlock>{children}</TypographyBlock>;\n};\n\nexport default Typography;\n","const tags = [\n  'math',\n  'annotation',\n  'semantics',\n  'mtext',\n  'mn',\n  'mo',\n  'mi',\n  'mspace',\n  'mover',\n  'munder',\n  'munderover',\n  'msup',\n  'msub',\n  'msubsup',\n  'mfrac',\n  'mroot',\n  'msqrt',\n  'mtable',\n  'mtr',\n  'mtd',\n  'mlabeledtr',\n  'mrow',\n  'menclose',\n  'mstyle',\n  'mpadded',\n  'mphantom',\n  'mglyph',\n  'svg',\n  'path',\n  'line',\n];\n\nconst attributes = tags.reduce((acc, current) => {\n  acc[current] = ['*'];\n  return acc;\n}, {} as Record<string, string[]>);\n\nconst styles = [\n  'background-color',\n  'border-bottom-width',\n  'border-color',\n  'border-right-style',\n  'border-right-width',\n  'border-top-width',\n  'border-style',\n  'border-width',\n  'bottom',\n  'color',\n  'height',\n  'left',\n  'margin',\n  'margin-left',\n  'margin-right',\n  'margin-top',\n  'min-width',\n  'padding-left',\n  'position',\n  'top',\n  'width',\n  'vertical-align',\n].reduce((acc, current) => {\n  acc[current] = [/.*/];\n  return acc;\n}, {} as Record<string, RegExp[]>);\n\nconst katexWhitelist = {\n  tags,\n  attributes,\n  styles,\n};\n\nexport default katexWhitelist;\n","import * as React from 'react';\nimport styled from 'styled-components';\nimport remark from 'remark';\n// import htmlPlugin from 'remark-html';\nimport slug from 'remark-slug';\nimport prismPlugin from '../../lib/remark/prismPlugin';\nimport prismThemes from '../../lib/styles/prismThemes';\nimport breaks from 'remark-breaks';\nimport Typography from './Typography';\nimport embedPlugin from '../../lib/remark/embedPlugin';\nimport { loadScript, ssrEnabled } from '../../lib/utils';\nimport media from '../../lib/styles/media';\nimport parse from 'html-react-parser';\nimport { throttle } from 'throttle-debounce';\nimport sanitize from 'sanitize-html';\nimport palette from '../../lib/styles/palette';\nimport math from 'remark-math';\nimport remark2rehype from 'remark-rehype';\nimport katex from 'rehype-katex';\nimport raw from 'rehype-raw';\nimport remarkParse from 'remark-parse';\nimport stringify from 'rehype-stringify';\nimport { Helmet } from 'react-helmet-async';\nimport katexWhitelist from '../../lib/katexWhitelist';\n\nexport interface MarkdownRenderProps {\n  markdown: string;\n  codeTheme?: string;\n  onConvertFinish?: (html: string) => any;\n  editing?: boolean;\n}\n\nconst MarkdownRenderBlock = styled.div`\n  &.atom-one-dark {\n    ${prismThemes['atom-one-dark']}\n  }\n  &.atom-one-light {\n    ${prismThemes['atom-one-light']}\n  }\n  &.github {\n    ${prismThemes['github']}\n  }\n  &.monokai {\n    ${prismThemes['monokai']}\n  }\n  &.dracula {\n    ${prismThemes['dracula']}\n  }\n\n  pre {\n    font-family: 'Fira Mono', source-code-pro, Menlo, Monaco, Consolas,\n      'Courier New', monospace;\n    font-size: 1rem;\n    padding: 1rem;\n    border-radius: 4px;\n    line-height: 1.5;\n    overflow-x: auto;\n    letter-spacing: 0px;\n    ${media.small} {\n      font-size: 0.75rem;\n      padding: 0.75rem;\n    }\n  }\n\n  img {\n    max-width: 100%;\n    height: auto;\n    display: block;\n    margin-top: 1.5rem;\n    margin-bottom: 1.5rem;\n  }\n\n  iframe {\n    width: 768px;\n    height: 430px;\n    max-width: 100%;\n    background: black;\n    display: block;\n    margin: auto;\n    border: none;\n    border-radius: 4px;\n    overflow: hidden;\n  }\n\n  .twitter-wrapper {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-left: none;\n    background: none;\n    padding: none;\n  }\n\n  table {\n    min-width: 40%;\n    max-width: 100%;\n    border: 1px solid ${palette.gray7};\n    border-collapse: collapse;\n    font-size: 0.875rem;\n    thead > tr > th {\n      /* text-align: left; */\n      border-bottom: 4px solid ${palette.gray7};\n    }\n    th,\n    td {\n      word-break: break-word;\n      padding: 0.5rem;\n    }\n\n    td + td,\n    th + th {\n      border-left: 1px solid ${palette.gray7};\n    }\n\n    tr:nth-child(even) {\n      background: ${palette.gray1};\n    }\n    tr:nth-child(odd) {\n      background: white;\n    }\n  }\n\n  .katex-mathml {\n    display: none;\n  }\n`;\n\nfunction filter(html: string) {\n  return sanitize(html, {\n    allowedTags: [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'p',\n      'a',\n      'ul',\n      'ol',\n      'nl',\n      'li',\n      'b',\n      'i',\n      'strong',\n      'em',\n      'strike',\n      'code',\n      'hr',\n      'br',\n      'div',\n      'table',\n      'thead',\n      'caption',\n      'tbody',\n      'tr',\n      'th',\n      'td',\n      'pre',\n      'iframe',\n      'span',\n      'img',\n      'del',\n      'input',\n\n      ...katexWhitelist.tags,\n    ],\n    allowedAttributes: {\n      a: ['href', 'name', 'target'],\n      img: ['src'],\n      iframe: ['src', 'allow', 'allowfullscreen', 'scrolling', 'class'],\n      '*': ['class', 'id', 'aria-hidden'],\n      span: ['style'],\n      input: ['type'],\n      ...katexWhitelist.attributes,\n    },\n    allowedStyles: {\n      '*': {\n        // Match HEX and RGB\n        color: [\n          /^#(0x)?[0-9a-f]+$/i,\n          /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/,\n        ],\n        'text-align': [/^left$/, /^right$/, /^center$/],\n      },\n      span: {\n        ...katexWhitelist.styles,\n      },\n    },\n    allowedIframeHostnames: ['www.youtube.com', 'codesandbox.io', 'codepen.io'],\n  });\n}\n\nconst { useState, useEffect } = React;\n\ntype RenderedElement =\n  | string\n  | React.DetailedReactHTMLElement<{}, HTMLElement>\n  | Array<React.DetailedReactHTMLElement<{}, HTMLElement>>\n  | null;\n\nconst MarkdownRender: React.FC<MarkdownRenderProps> = ({\n  markdown,\n  codeTheme = 'atom-one-light',\n  onConvertFinish,\n  editing,\n}) => {\n  const [html, setHtml] = useState(\n    ssrEnabled\n      ? filter(\n          remark()\n            .use(remarkParse)\n            .use(slug)\n            .use(prismPlugin)\n            .use(embedPlugin)\n            .use(remark2rehype, { allowDangerousHTML: true })\n            .use(raw)\n            .use(breaks)\n            .use(math)\n            .use(katex)\n            .use(stringify)\n            .processSync(markdown)\n            .toString(),\n        )\n      : '',\n  );\n\n  const [element, setElement] = useState<RenderedElement>(null);\n  const [hasTagError, setHasTagError] = useState(false);\n  const [delay, setDelay] = useState(25);\n\n  const throttledUpdate = React.useMemo(() => {\n    return throttle(delay, (markdown: string) => {\n      remark()\n      .use(remarkParse)\n      .use(slug)\n      .use(prismPlugin)\n      .use(embedPlugin)\n      .use(remark2rehype, { allowDangerousHTML: true })\n      .use(raw)\n      .use(breaks)\n      .use(math)\n      .use(katex)\n      .use(stringify)\n      .process(markdown, (err: any, file: any) => {\n        const lines = markdown.split(/\\r\\n|\\r|\\n/).length\n        const nextDelay = Math.max(Math.min(Math.floor(lines * 0.5), 1500), 22)\n        if (nextDelay !== delay) {\n          setDelay(nextDelay)\n        }\n        const html = String(file);\n\n        if (onConvertFinish) {\n          onConvertFinish(html);\n        }\n        // load twitter script if needed\n        if (html.indexOf('class=\"twitter-tweet\"') !== -1) {\n          // if (window && (window as any).twttr) return;\n          loadScript('https://platform.twitter.com/widgets.js');\n        }\n\n        if (!editing) {\n          setHtml(filter(html));\n          return;\n        }\n\n        try {\n          const el = parse(html);\n          setHasTagError(false);\n          setElement(el as any);\n        } catch (e) {}\n    }, 1)\n    });\n  }, [delay, editing, onConvertFinish]);\n\n\n\n  useEffect(() => {\n    throttledUpdate(markdown)    \n  }, [markdown, throttledUpdate]);\n\n  return (\n    <Typography>\n      <Helmet>\n        {/\\$(.*)\\$/.test(markdown) && (\n          <link\n            rel=\"stylesheet\"\n            href=\"https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css\"\n            integrity=\"sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq\"\n            crossOrigin=\"anonymous\"\n          />\n        )}\n      </Helmet>\n      {editing ? (\n        <MarkdownRenderErrorBoundary\n          onError={() => setHasTagError(true)}\n          hasTagError={hasTagError}\n        >\n          <MarkdownRenderBlock className={codeTheme}>\n            {element}\n          </MarkdownRenderBlock>\n        </MarkdownRenderErrorBoundary>\n      ) : (\n        <MarkdownRenderBlock\n          className={codeTheme}\n          dangerouslySetInnerHTML={{ __html: html }}\n        />\n      )}\n    </Typography>\n  );\n};\n\ntype ErrorBoundaryProps = {\n  onError: () => void;\n  hasTagError: boolean;\n};\nclass MarkdownRenderErrorBoundary extends React.Component<ErrorBoundaryProps> {\n  state = {\n    hasError: false,\n  };\n  componentDidCatch() {\n    this.setState({\n      hasError: true,\n    });\n    this.props.onError();\n  }\n\n  componentDidUpdate(prevProps: ErrorBoundaryProps) {\n    if (prevProps.hasTagError && !this.props.hasTagError) {\n      this.setState({\n        hasError: false,\n      });\n    }\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <div>HTML 태그 파싱 실패</div>;\n    }\n    return this.props.children;\n  }\n}\n\nexport default React.memo(MarkdownRender);\n","import * as React from 'react';\nimport styled from 'styled-components';\nimport MarkdownRender from '../common/MarkdownRender';\nimport palette from '../../lib/styles/palette';\n\nconst MarkdownPreviewBlock = styled.div`\n  word-break: break-word;\n  padding: 3rem;\n  flex: 1;\n  overflow-y: auto;\n  color: ${palette.gray9};\n`;\n\nconst Title = styled.h1`\n  font-size: 2.5em;\n  margin-bottom: 4rem;\n  font-weight: 800;\n`;\n\nexport interface MarkdownPreviewProps {\n  markdown: string;\n  title: string;\n  className?: string;\n}\n\nconst MarkdownPreview: React.FC<MarkdownPreviewProps> = ({\n  markdown,\n  title,\n  className,\n}) => {\n  return (\n    <MarkdownPreviewBlock id=\"preview\">\n      <Title>{title}</Title>\n      <MarkdownRender markdown={markdown} editing />\n    </MarkdownPreviewBlock>\n  );\n};\n\nexport default MarkdownPreview;\n","import * as React from 'react';\nimport MarkdownPreview from '../../components/write/MarkdownPreview';\nimport { connect } from 'react-redux';\nimport { RootState } from '../../modules';\n\ninterface OwnProps {}\ninterface StateProps {\n  markdown: string;\n  title: string;\n}\ninterface DispatchProps {}\ntype MarkdownPreviewContainerProps = OwnProps & StateProps & DispatchProps;\n\nconst MarkdownPreviewContainer: React.FC<MarkdownPreviewContainerProps> = ({\n  markdown,\n  title,\n}) => {\n  return <MarkdownPreview markdown={markdown} title={title} />;\n};\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n  ({ write }) => ({\n    markdown: write.markdown,\n    title: write.title,\n  }),\n  dispatch => ({}),\n)(MarkdownPreviewContainer);\n","import * as React from 'react';\nimport EditorPanes from '../../components/write/EditorPanes';\nimport MarkdownEditorContainer from './MarkdownEditorContainer';\nimport MarkdownPreviewContainer from './MarkdownPreviewContainer';\n\ninterface EditorPanesContainerProps {}\n\nconst EditorPanesContainer: React.FC<EditorPanesContainerProps> = props => {\n  return (\n    <EditorPanes\n      left={<MarkdownEditorContainer />}\n      right={<MarkdownPreviewContainer />}\n    />\n  );\n};\n\nexport default EditorPanesContainer;\n","import React from 'react';\nimport EditorPanesContainer from './container/write/EditorPanesContainer';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <EditorPanesContainer></EditorPanesContainer>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { deprecated } from 'typesafe-actions';\nimport { AuthMode } from './types';\n// import { CurrentUser } from '../../lib/graphql/user';\n\nconst { createStandardAction } = deprecated;\n\nexport const SET_LAYER = 'core/SET_LAYER';\nexport const SHOW_AUTH_MODAL = 'core/SHOW_AUTH_MODAL';\nexport const CHANGE_AUTH_MODAL_MODE = 'core/CHANGE_AUTH_MODAL_MODE';\nexport const CLOSE_AUTH_MODAL = 'core/CLOSE_AUTH_MODAL';\nexport const SET_USER = 'core/SET_USER';\nexport const OPEN_POPUP = 'core/OPEN_POPUP';\nexport const CLOSE_POPUP = 'core/CLOSE_POPUP';\n\nexport const setLayer = createStandardAction(SET_LAYER)<boolean>();\nexport const showAuthModal = createStandardAction(SHOW_AUTH_MODAL)<AuthMode>();\nexport const changeAuthModalMode = createStandardAction(CHANGE_AUTH_MODAL_MODE)<\n  AuthMode\n>();\nexport const closeAuthModal = createStandardAction(CLOSE_AUTH_MODAL)();\n// export const setUser = createStandardAction(SET_USER)<CurrentUser | nulㅍl>();\n\nexport const openPopup = createStandardAction(OPEN_POPUP)<{\n  title?: string;\n  message: string;\n}>();\nexport const closePopup = createStandardAction(CLOSE_POPUP)();\n","import { createReducer } from 'typesafe-actions';\nimport { CoreState, CoreAction } from './types';\nimport {\n  SET_LAYER,\n  SHOW_AUTH_MODAL,\n  CHANGE_AUTH_MODAL_MODE,\n  CLOSE_AUTH_MODAL,\n  // SET_USER,\n  OPEN_POPUP,\n  CLOSE_POPUP,\n} from './actions';\nimport produce from 'immer';\n// import { updateKey } from '../../lib/utils';\n\nconst initialState: CoreState = {\n  layer: false,\n  auth: {\n    visible: false,\n    mode: 'LOGIN',\n  },\n  // user: null,\n  popup: {\n    visible: false,\n    title: '',\n    message: '',\n  },\n};\n\nconst core = createReducer<CoreState, CoreAction>(initialState, {\n  [SET_LAYER]: (state, action) => ({\n    ...state,\n    layer: action.payload,\n  }),\n  [SHOW_AUTH_MODAL]: (state, action) =>\n    produce(state, draft => {\n      draft.auth.mode = action.payload;\n      draft.auth.visible = true;\n      draft.layer = true;\n    }),\n  [CHANGE_AUTH_MODAL_MODE]: (state, action) =>\n    produce(state, draft => {\n      draft.auth.mode = action.payload;\n    }),\n  [CLOSE_AUTH_MODAL]: state =>\n    produce(state, draft => {\n      draft.auth.visible = false;\n      draft.layer = false;\n    }),\n  // [SET_USER]: (state, { payload: user }) => updateKey(state, 'user', user),\n  [OPEN_POPUP]: (state, action) =>\n    produce(state, draft => {\n      draft.popup.title = action.payload.title;\n      draft.popup.message = action.payload.message;\n      draft.popup.visible = true;\n    }),\n  [CLOSE_POPUP]: state =>\n    produce(state, draft => {\n      draft.popup.visible = false;\n    }),\n});\n\nexport default core;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from '.';\n\nexport interface PostState {\n  id: string | null;\n}\n\nconst initialState: PostState = {\n  id: null,\n};\n\nconst post = createSlice({\n  name: 'post',\n  initialState,\n  reducers: {\n    setPostId(state, action: PayloadAction<string>) {\n      state.id = action.payload;\n    },\n  },\n});\n\nexport const selectPostId = (state: RootState) => state.post.id;\n\nexport default post;\n","import { createSlice } from '@reduxjs/toolkit';\n\nexport type ErrorState = {\n  errorType: 'NOT_FOUND' | 'CRASHED' | null;\n};\n\nconst initialState: ErrorState = {\n  errorType: null,\n};\n\nconst error = createSlice({\n  name: 'error',\n  initialState,\n  reducers: {\n    showNotFound(state) {\n      state.errorType = 'NOT_FOUND';\n    },\n    reset(state) {\n      state.errorType = null;\n    },\n  },\n});\n\nexport default error;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport type ScrollState = {\n  main: number;\n  'user/posts': number;\n};\n\nexport type ScrollKey = keyof ScrollState;\n\nconst initialState: ScrollState = {\n  main: 0,\n  'user/posts': 0,\n};\n\nconst scroll = createSlice({\n  name: 'scroll',\n  initialState,\n  reducers: {\n    preserveScroll(\n      state,\n      { payload: { key, top } }: PayloadAction<{ key: ScrollKey; top: number }>,\n    ) {\n      state[key] = top;\n    },\n  },\n});\n\nexport default scroll;\n","import { combineReducers } from 'redux';\nimport core, { CoreState } from './core';\nimport write, { WriteState } from './write';\nimport post, { PostState } from './post';\nimport error, { ErrorState } from './error';\nimport scroll, { ScrollState } from './scroll';\n\nexport type RootState = {\n  core: CoreState;\n  write: WriteState;\n  post: PostState;\n  error: ErrorState;\n  scroll: ScrollState;\n};\n\nconst rootReducer = combineReducers({\n  core,\n  write,\n  post: post.reducer,\n  error: error.reducer,\n  scroll: scroll.reducer,\n});\n\nexport default rootReducer;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './typography.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { createStore } from 'redux';\nimport { Provider } from 'react-redux';\nimport { HelmetProvider } from 'react-helmet-async';\nimport rootReducer from './modules';\n\nconst store = createStore(\n  rootReducer,\n  (window as any).__REDUX_STATE__,\n  // composeWithDevTools(),\n);\n\nReactDOM.render(\n  <React.StrictMode>\n    <HelmetProvider>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </HelmetProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workersㅊ: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}